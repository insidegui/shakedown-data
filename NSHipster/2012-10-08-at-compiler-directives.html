<div class="announce instapaper_body md" data-path="2012-10-08-at-compiler-directives.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>author</th>

  <th>category</th>

  <th>tags</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>@</div></td>

  <td><div>Mattt Thompson</div></td>

  <td><div>Objective-C</div></td>

  <td><div>nshipster</div></td>

  <td><div>If we were to go code-watching for Objective-C, what would we look for? Square brackets, ridiculously-long method names, and `@`'s. "at" sign compiler directives are as central to understanding Objective-C's gestalt as its ancestry and underlying mechanisms. It's the sugary glue that allows Objective-C to be such a powerful, expressive language, and yet still compile all the way down to C.</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>n/a</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<p>Birdwatchers refer to it as (and I swear I'm not making this up) <a href="http://en.wikipedia.org/wiki/Jizz_%28birding%29">"Jizz"</a>: those indefinable characteristics unique to a particular kind of thing.</p>

<p>This term can be appropriated to describe how seasoned individuals might distinguish <a href="http://www.rust-lang.org">Rust</a> from <a href="http://golang.org">Go</a>, or <a href="http://www.ruby-lang.org">Ruby</a> from <a href="http://elixir-lang.org">Elixir</a> at a glance.</p>

<p>Some just stick out like sore thumbs:</p>

<p>Perl, with all of its short variable names with special characters, reads like <a href="http://imgur.com/WyG2D">Q*bert swearing</a>.</p>

<p>Lisp, whose profusion of parentheses is best captured by <a href="http://discuss.fogcreek.com/joelonsoftware3/default.asp?cmd=show&amp;ixPost=94232&amp;ixReplies=38">that old joke</a> about the Russians in the 1980's proving that they had stolen the source code of some SDI missile interceptor code by showing the last page:</p>

<div class="highlight highlight-source-lisp"><pre>                )))
              ) )
            ))) ) ))
           )))))
          )))
        ))
      )))) ))
    )))) ))
  )))
)</pre></div>

<p>So if we were to go code-watching for the elusive Objective-C species, what would we look for? That's right:</p>

<ul>
<li>Square brackets</li>
<li>Ridiculously-long method names</li>
<li><code>@</code>'s</li>
</ul>

<p><code>@</code>, or "at" sign compiler directives, are as central to understanding Objective-C's gestalt as its ancestry and underlying mechanisms. It's the sugary glue that allows Objective-C to be such a powerful, expressive language, and yet still compile all the way down to C.</p>

<p>Its uses are varied and disparate, to the point that the only accurate way to describe what <code>@</code> means by itself is "shorthand for something to do with Objective-C". They cover a broad range in usefulness and obscurity, from staples like <code>@interface</code> and <code>@implementation</code> to ones you could go your whole career without running into, like <code>@defs</code> and <code>@compatibility_alias</code>.</p>

<p>But to anyone aspiring to be an NSHipster, intimate familiarity with <code>@</code> directives is tantamount to a music lover's ability to enumerate the entire Beatles catalog in chronological order (and most importantly, having unreasonably strong opinions about each of them).</p>

<h2><a id="user-content-interface--implementation" class="anchor" href="#interface--implementation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interface &amp; Implementation</h2>

<p><code>@interface</code> and <code>@implementation</code> are the first things you learn about when you start Objective-C:</p>

<ul>
<li><code>@interface</code>...<code>@end</code></li>
<li><code>@implementation</code>...<code>@end</code></li>
</ul>

<p>What you don't learn about until later on, are categories and class extensions.</p>

<p>Categories allow you to extend the behavior of existing classes by adding new class or instance methods. As a convention, categories are defined in their own <code>.{h,m}</code> files, like so:</p>

<h4><a id="user-content-myobjectcategorynameh" class="anchor" href="#myobjectcategorynameh" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MyObject+CategoryName.h</h4>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@interface</span> <span class="pl-en">MyObject</span> (CategoryName)
  - (<span class="pl-k">void</span>)foo;
  - (<span class="pl-c1">BOOL</span>)barWithBaz:(<span class="pl-c1">NSInteger</span>)baz;
<span class="pl-k">@end</span></pre></div>

<h4><a id="user-content-myobjectcategorynamem" class="anchor" href="#myobjectcategorynamem" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MyObject+CategoryName.m</h4>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@implementation</span> <span class="pl-en">MyObject</span> (CategoryName)
  - (<span class="pl-k">void</span>)foo {
    <span class="pl-c">// ...</span>
  }

  - (<span class="pl-c1">BOOL</span>)barWithBaz:(<span class="pl-c1">NSInteger</span>)baz {
    <span class="pl-k">return</span> <span class="pl-c1">YES</span>;
  }
<span class="pl-k">@end</span></pre></div>

<p>Categories are particularly useful for convenience methods on standard framework classes (just don't go overboard with your utility functions).</p>

<blockquote>
<p>Pro Tip: Rather than littering your code with random, arbitrary color values, create an <code>NSColor</code> / <code>UIColor</code> color palette category that defines class methods like <code>+appNameDarkGrayColor</code>. You can then add a semantic layer on top of that by creating method aliases like <code>+appNameTextColor</code>, which returns <code>+appNameDarkGrayColor</code>.</p>
</blockquote>

<p>Extensions look like categories, but omit the category name. These are typically declared before an <code>@implementation</code> to specify a private interface, and even override properties declared in the interface:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@interface</span> <span class="pl-en">MyObject</span> ()
<span class="pl-k">@property</span> (<span class="pl-k">readwrite</span>, <span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) <span class="pl-c1">NSString</span> *name;
- (<span class="pl-k">void</span>)<span class="pl-en">doSomething</span>;
<span class="pl-k">@end</span>

<span class="pl-k">@implementation</span> <span class="pl-en">MyObject</span>
<span class="pl-k">@synthesize</span> name = _name;

<span class="pl-c">// ...</span>

<span class="pl-k">@end</span></pre></div>

<h3><a id="user-content-properties" class="anchor" href="#properties" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Properties</h3>

<p>Property directives are likewise concepts learned early on:</p>

<ul>
<li><code>@property</code></li>
<li><code>@synthesize</code></li>
<li><code>@dynamic</code></li>
</ul>

<p>One interesting note with properties is that as of Xcode 4.4, it is no longer necessary to explicitly synthesize properties. Properties declared in an <code>@interface</code> are automatically synthesized (with leading underscore ivar name, i.e. <code>@synthesize propertyName = _propertyName</code>) in the implementation.</p>

<h3><a id="user-content-forward-class-declarations" class="anchor" href="#forward-class-declarations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Forward Class Declarations</h3>

<p>Occasionally, <code>@interface</code> declarations will reference an external class in a property or as a parameter type. Rather than adding <code>#import</code> statements for each class, it's good practice to use forward class declarations in the header, and import them in the implementation.</p>

<ul>
<li><code>@class</code></li>
</ul>

<p>Shorter compile times, less chance of cyclical references; you should definitely get in the habit of doing this if you aren't already.</p>

<h3><a id="user-content-instance-variable-visibility" class="anchor" href="#instance-variable-visibility" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Instance Variable Visibility</h3>

<p>It's a matter of general convention that classes provide state and mutating interfaces through properties and methods, rather than directly exposing ivars.</p>

<p>Although ARC makes working with ivars much safer by taking care of memory management, the aforementioned automatic property synthesis removes the one place where ivars would otherwise be declared.</p>

<p>Nonetheless, in cases where ivars <em>are</em> directly manipulated, there are the following visibility directives:</p>

<ul>
<li><code>@public</code>: instance variable can be read and written to directly, using the notation <code>person-&gt;age = 32"</code></li>
<li><code>@package</code>: instance variable is public, except outside of the framework in which it is specified (64-bit architectures only)</li>
<li><code>@protected</code>: instance variable is only accessible to its class and derived classes</li>
<li><code>@private</code>: instance variable is only accessible to its class</li>
</ul>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@interface</span> <span class="pl-en">Person</span> : <span class="pl-e">NSObject</span> {
  <span class="pl-k">@public</span>
  <span class="pl-c1">NSString</span> *name;
  <span class="pl-k">int</span> age;

  <span class="pl-k">@private</span>
  <span class="pl-k">int</span> salary;
}</pre></div>

<h2><a id="user-content-protocols" class="anchor" href="#protocols" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protocols</h2>

<p>There's a distinct point early in an Objective-C programmer's evolution, when she realizes that she can define her own protocols.</p>

<p>The beauty of protocols is that they allow programmers to design contracts that can be adopted outside of a class hierarchy. It's the egalitarian mantra at the heart of the American Dream: that it doesn't matter who you are, or where you come from: anyone can achieve anything if they work hard enough.</p>

<p>...or at least that's idea, right?</p>

<ul>
<li><code>@protocol</code>...<code>@end</code>: Defines a set of methods to be implemented by any class  conforming to the protocol, as if they were added to the interface of that class.</li>
</ul>

<p>Architectural stability and expressiveness without the burden of coupling--protocols are awesome.</p>

<h3><a id="user-content-requirement-options" class="anchor" href="#requirement-options" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirement Options</h3>

<p>You can further tailor a protocol by specifying methods as required or optional. Optional methods are stubbed in the interface, so as to be auto-completed in Xcode, but do not generate a warning if the method is not implemented. Protocol methods are required by default.</p>

<p>The syntax for <code>@required</code> and <code>@optional</code> follows that of the visibility macros:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@protocol</span> <span class="pl-en">CustomControlDelegate</span>
  - (<span class="pl-k">void</span>)control:(CustomControl *)control didSucceedWithResult:(<span class="pl-c1">id</span>)result;
<span class="pl-k">@optional</span>
  - (<span class="pl-k">void</span>)control:(CustomControl *)control didFailWithError:(<span class="pl-c1">NSError</span> *)error;
<span class="pl-k">@end</span></pre></div>

<h2><a id="user-content-exception-handling" class="anchor" href="#exception-handling" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Exception Handling</h2>

<p>Objective-C communicates unexpected state primarily through <code>NSError</code>. Whereas other languages would use exception handling for this, Objective-C relegates exceptions to truly exceptional behavior, including programmer error.</p>

<p><code>@</code> directives are used for the traditional convention of <code>try/catch/finally</code> blocks:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@try</span>{
  <span class="pl-c">// attempt to execute the following statements</span>
  [<span class="pl-v">self</span> <span class="pl-c1">getValue:</span>&amp;value <span class="pl-c1">error:</span>&amp;error];

  <span class="pl-c">// if an exception is raised, or explicitly thrown...</span>
  <span class="pl-k">if</span> (error) {
    <span class="pl-k">@throw</span> exception;
  }
} <span class="pl-k">@catch</span>(<span class="pl-c1">NSException</span> *e) {
  <span class="pl-c">// ...handle the exception here</span>
}  <span class="pl-k">@finally</span> {
  <span class="pl-c">// always execute this at the end of either the @try or @catch block</span>
  [<span class="pl-v">self</span> <span class="pl-c1">cleanup</span>];
}</pre></div>

<h2><a id="user-content-literals" class="anchor" href="#literals" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Literals</h2>

<p>Literals are shorthand notation for specifying fixed values. Literals are more
-or-less directly correlated with programmer happiness. By this measure, Objective-C has long been a language of programmer misery.</p>

<h3><a id="user-content-object-literals" class="anchor" href="#object-literals" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Object Literals</h3>

<p>Until recently, Objective-C only had literals for <code>NSString</code>. But with the release of the <a href="http://clang.llvm.org/docs/ObjectiveCLiterals.html">Apple LLVM 4.0 compiler</a>, literals for <code>NSNumber</code>, <code>NSArray</code> and <code>NSDictionary</code> were added, with much rejoicing.</p>

<ul>
<li><code>@""</code>: Returns an <code>NSString</code> object initialized with the Unicode content inside the quotation marks.</li>
<li><code>@42</code>, <code>@3.14</code>, <code>@YES</code>, <code>@'Z'</code>: Returns an <code>NSNumber</code> object initialized with pertinent class constructor, such that <code>@42</code> → <code>[NSNumber numberWithInteger:42]</code>, or <code>@YES</code> → <code>[NSNumber numberWithBool:YES]</code>. Supports the use of suffixes to further specify type, like <code>@42U</code> → <code>[NSNumber numberWithUnsignedInt:42U]</code>.</li>
<li><code>@[]</code>: Returns an <code>NSArray</code> object initialized with the comma-delimited list of objects as its contents. It uses +arrayWithObjects:count: class constructor method, which is a more precise alternative to the more familiar <code>+arrayWithObjects:</code>. For example, <code>@[@"A", @NO, @2.718]</code> → <code>id objects[] = {@"A", @NO, @2.718}; [NSArray arrayWithObjects:objects count:3]</code>.</li>
<li><code>@{}</code>: Returns an <code>NSDictionary</code> object initialized with the specified key-value pairs as its contents, in the format: <code>@{@"someKey" : @"theValue"}</code>.</li>
<li><code>@()</code>: Dynamically evaluates the boxed expression and returns the appropriate object literal based on its value (i.e. <code>NSString</code> for <code>const char*</code>, <code>NSNumber</code> for <code>int</code>, etc.). This is also the designated way to use number literals with <code>enum</code> values.</li>
</ul>

<h3><a id="user-content-objective-c-literals" class="anchor" href="#objective-c-literals" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Objective-C Literals</h3>

<p>Selectors and protocols can be passed as method parameters. <code>@selector()</code> and <code>@protocol()</code> serve as pseudo-literal directives that return a pointer to a particular selector (<code>SEL</code>) or protocol (<code>Protocol *</code>).</p>

<ul>
<li><code>@selector()</code>: Returns an <code>SEL</code> pointer to a selector with the specified name. Used in methods like <code>-performSelector:withObject:</code>.</li>
<li><code>@protocol()</code>: Returns a <code>Protocol *</code> pointer to the protocol with the specified name. Used in methods like <code>-conformsToProtocol:</code>.</li>
</ul>

<h3><a id="user-content-c-literals" class="anchor" href="#c-literals" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>C Literals</h3>

<p>Literals can also work the other way around, transforming Objective-C objects into C values. These directives in particular allow us to peek underneath the Objective-C veil, to begin to understand what's really going on.</p>

<p>Did you know that all Objective-C classes and objects are just glorified <code>struct</code>s? Or that the entire identity of an object hinges on a single <code>isa</code> field in that <code>struct</code>?</p>

<p>For most of us, at least most of the time, coming into this knowledge is but an academic exercise. But for anyone venturing into low-level optimizations, this is simply the jumping-off point.</p>

<ul>
<li><code>@encode()</code>: Returns the <a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html">type encoding</a> of a type. This type value can be used as the first argument encode in <code>NSCoder -encodeValueOfObjCType:at:</code>.</li>
<li><code>@defs()</code>: Returns the layout of an Objective-C class. For example, to declare a struct with the same fields as an <code>NSObject</code>, you would simply do:</li>
</ul>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">struct</span> {
  <span class="pl-k">@defs</span>(NSObject)
}</pre></div>

<blockquote>
<p>Ed. As pointed out by readers <a href="http://twitter.com/secboffin">@secboffin</a> &amp; <a href="http://twitter.com/ameaijou">@ameaijou</a>, <code>@defs</code> is unavailable in the modern Objective-C runtime.</p>
</blockquote>

<h2><a id="user-content-optimizations" class="anchor" href="#optimizations" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optimizations</h2>

<p>There are some <code>@</code> compiler directives specifically purposed for providing shortcuts for common optimizations.</p>

<ul>
<li><code>@autoreleasepool{}</code>: If your code contains a tight loop that creates lots of temporary objects, you can use the <code>@autoreleasepool</code> directive to optimize for these short-lived, locally-scoped objects by being more aggressive about how they're deallocated. <code>@autoreleasepool</code> replaces and improves upon the old <code>NSAutoreleasePool</code>, which is significantly slower, and unavailable with ARC.</li>
<li><code>@synchronized(){}</code>: This directive offers a convenient way to guarantee the safe execution of a particular block within a specified context (usually <code>self</code>). Locking in this way is expensive, however, so for classes aiming for a particular level of thread safety, a dedicated <code>NSLock</code> property or the use of low-level locking functions like <code>OSAtomicCompareAndSwap32(3)</code> are recommended.</li>
</ul>

<h2><a id="user-content-compatibility" class="anchor" href="#compatibility" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compatibility</h2>

<p>In case all of the previous directives were old hat for you, there's a strong likelihood that you didn't know about this one:</p>

<ul>
<li><code>@compatibility_alias</code>: Allows existing classes to be aliased by a different name.</li>
</ul>

<p>For example <a href="https://github.com/steipete/PSTCollectionView">PSTCollectionView</a> uses <code>@compatibility_alias</code> to significantly improve the experience of using the backwards-compatible, drop-in replacement for <a href="http://nshipster.com/uicollectionview/">UICollectionView</a>:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// Allows code to just use UICollectionView as if it would be available on iOS SDK 5.</span>
<span class="pl-c">// http://developer.apple.    com/legacy/mac/library/#documentation/DeveloperTools/gcc-3.   3/gcc/compatibility_005falias.html</span>
#<span class="pl-k">if</span> __IPHONE_OS_VERSION_MAX_ALLOWED &lt; 60000
@compatibility_alias UICollectionViewController PSTCollectionViewController;
@compatibility_alias UICollectionView PSTCollectionView;
@compatibility_alias UICollectionReusableView PSTCollectionReusableView;
@compatibility_alias UICollectionViewCell PSTCollectionViewCell;
@compatibility_alias UICollectionViewLayout PSTCollectionViewLayout;
@compatibility_alias UICollectionViewFlowLayout PSTCollectionViewFlowLayout;
@compatibility_alias UICollectionViewLayoutAttributes     PSTCollectionViewLayoutAttributes;
<span class="pl-k">@protocol</span> <span class="pl-en">UICollectionViewDataSource</span> &lt;PSTCollectionViewDataSource&gt; <span class="pl-k">@end</span>
<span class="pl-k">@protocol</span> <span class="pl-en">UICollectionViewDelegate</span> &lt;PSTCollectionViewDelegate&gt; <span class="pl-k">@end</span>
#<span class="pl-k">endif</span></pre></div>

<p>Using this clever combination of macros, a developer can develop with <code>UICollectionView</code> by including <code>PSTCollectionView</code>--without worrying about the deployment target of the final project. As a drop-in replacement, the same code works more-or-less identically on iOS 6 as it does on iOS 4.3.</p>

<hr>

<p>So to review:</p>

<p><strong>Interfaces &amp; Implementation</strong></p>

<ul>
<li><code>@interface</code>...<code>@end</code></li>
<li><code>@implementation</code>...<code>@end</code></li>
<li><code>@class</code></li>
</ul>

<p><strong>Instance Variable Visibility</strong></p>

<ul>
<li><code>@public</code></li>
<li><code>@package</code></li>
<li><code>@protected</code></li>
<li><code>@private</code></li>
</ul>

<p><strong>Properties</strong></p>

<ul>
<li><code>@property</code></li>
<li><code>@synthesize</code></li>
<li><code>@dynamic</code></li>
</ul>

<p><strong>Protocols</strong></p>

<ul>
<li><code>@protocol</code></li>
<li><code>@required</code></li>
<li><code>@optional</code></li>
</ul>

<p><strong>Exception Handling</strong></p>

<ul>
<li><code>@try</code></li>
<li><code>@catch</code></li>
<li><code>@finally</code></li>
<li><code>@throw</code></li>
</ul>

<p><strong>Object Literals</strong></p>

<ul>
<li><code>@""</code></li>
<li><code>@42</code>, <code>@3.14</code>, <code>@YES</code>, <code>@'Z'</code></li>
<li><code>@[]</code></li>
<li><code>@{}</code></li>
<li><code>@()</code></li>
</ul>

<p><strong>Objective-C Literals</strong></p>

<ul>
<li><code>@selector()</code></li>
<li><code>@protocol()</code></li>
</ul>

<p><strong>C Literals</strong></p>

<ul>
<li><code>@encode()</code></li>
<li><code>@defs()</code></li>
</ul>

<p><strong>Optimizations</strong></p>

<ul>
<li><code>@autoreleasepool{}</code></li>
<li><code>@synchronized{}</code></li>
</ul>

<p><strong>Compatibility</strong></p>

<ul>
<li><code>@compatibility_alias</code></li>
</ul>

<p>Thus concludes this exhaustive rundown of the many faces of <code>@</code>. It's a versatile, power-packed character, that embodies the underlying design and mechanisms of the language.</p>

<blockquote>
<p>This should be a complete list, but there's always a chance that some new or long-forgotten ones slipped between the cracks. If you know of any <code>@</code> directives that were left out, be sure to let <a href="https://twitter.com/nshipster">@NSHipster</a> know.</p>
</blockquote>
</article></div>