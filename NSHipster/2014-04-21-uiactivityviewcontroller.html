<div class="announce instapaper_body md" data-path="2014-04-21-uiactivityviewcontroller.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>author</th>

  <th>category</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>UIActivityViewController</div></td>

  <td><div>Mattt Thompson</div></td>

  <td><div>Cocoa</div></td>

  <td><div>The relationship between code and data has long been a curious one.</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>

  <th>reviewed</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>2.0</div></td>

  <td><div>September 7, 2015</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<p>The relationship between code and data has long been a curious one.</p>

<p>Certain programming languages, such as <a href="http://en.wikipedia.org/wiki/Lisp_programming_language">Lisp</a>, <a href="http://en.wikipedia.org/wiki/Io_%28programming_language%29">Io</a>, and <a href="http://en.wikipedia.org/wiki/Mathematica">Mathematica</a> are  <a href="http://en.wikipedia.org/wiki/Homoiconicity">homoiconic</a>, meaning that their code is represented as a data primitive, which itself can be manipulated in code. Most other languages, including Objective-C, however, create a strict boundary between the two, shying away from <code>eval()</code> and other potentially dangerous methods of dynamic instructing loading.</p>

<p>This tension between code and data is brought to a whole new level when the data in question is too large or unwieldy to represent as anything but a byte stream. The question of how to encode, decode, and interpret the binary representation of images, documents, and media has been ongoing since the very first operating systems.</p>

<p>The Core Services framework on OS X and Mobile Core Services framework on iOS provide functions that identify and categorize data types by file extension and <a href="http://en.wikipedia.org/wiki/Internet_media_type">MIME type</a>, according to <a href="http://en.wikipedia.org/wiki/Uniform_Type_Identifier">Universal Type Identifiers</a>. UTIs provide an extensible, hierarchical categorization system, which affords the developer great flexibility in handling even the most exotic file types. For example, a Ruby source file (<code>.rb</code>) is categorized as Ruby Source Code &gt; Source Code &gt; Text &gt; Content &gt; Data; a QuickTime Movie file (<code>.mov</code>) is categorized as Video &gt; Movie &gt; Audiovisual Content &gt; Content &gt; Data.</p>

<p>UTIs have worked reasonably well within the filesystem abstraction of the desktop. However, in a mobile paradigm, where files and directories are hidden from the user, this breaks down quickly. And, what's more, the rise of cloud services and social media has placed greater importance on remote entities over local files. Thus, a tension between UTIs and URLs.</p>

<p>It's clear that we need something else. Could <code>UIActivityViewController</code> be the solution we so desperately seek?</p>

<hr>

<p><code>UIActivityViewController</code>, introduced in iOS 6, provides a unified services interface for sharing and performing actions on data within an application.</p>

<p>Given a collection of actionable data, a <code>UIActivityViewController</code> instance is created as follows:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> string: <span class="pl-c1">String</span> <span class="pl-k">=</span> <span class="pl-k">...</span>
<span class="pl-k">let</span> URL: NSURL <span class="pl-k">=</span> <span class="pl-k">...</span>

<span class="pl-k">let</span> activityViewController <span class="pl-k">=</span> UIActivityViewController(activityItems: [string, URL], applicationActivities: <span class="pl-c1">nil</span>)
navigationController?<span class="pl-k">.</span>presentViewController(activityViewController, animated: <span class="pl-c1">true</span>) {
    <span class="pl-c">// ...</span>
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSString</span> *string = ...;
<span class="pl-c1">NSURL</span> *URL = ...;

UIActivityViewController *activityViewController =
  [[UIActivityViewController <span class="pl-c1">alloc</span>] <span class="pl-c1">initWithActivityItems:</span>@[string, URL]
                                    <span class="pl-c1">applicationActivities:</span><span class="pl-c1">nil</span>];
[navigationController <span class="pl-c1">presentViewController:</span>activityViewController
                                      <span class="pl-c1">animated:</span><span class="pl-c1">YES</span>
                                    <span class="pl-c1">completion:</span>^{
  <span class="pl-c">// ...</span>
}];</pre></div>

<p>This would present the following at the bottom of the screen:</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/uiactivityviewcontroller.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/uiactivityviewcontroller.png" alt="UIActivityViewController" style="max-width:100%;"></a></p>

<p>By default, <code>UIActivityViewController</code> will show all available services supporting the provided items, but certain activity types can be excluded:</p>

<div class="highlight highlight-source-swift"><pre>activityViewController<span class="pl-k">.</span>excludedActivityTypes <span class="pl-k">=</span> [UIActivityTypePostToFacebook]</pre></div>

<div class="highlight highlight-source-objc"><pre>activityViewController.excludedActivityTypes = @[UIActivityTypePostToFacebook];</pre></div>

<p>Activity types are divided up into "action" and "share" types:</p>

<h3><a id="user-content-uiactivitycategoryaction" class="anchor" href="#uiactivitycategoryaction" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UIActivityCategoryAction</h3>

<ul>
<li><code>UIActivityTypePrint</code></li>
<li><code>UIActivityTypeCopyToPasteboard</code></li>
<li><code>UIActivityTypeAssignToContact</code></li>
<li><code>UIActivityTypeSaveToCameraRoll</code></li>
<li><code>UIActivityTypeAddToReadingList</code></li>
<li><code>UIActivityTypeAirDrop</code></li>
</ul>

<h3><a id="user-content-uiactivitycategoryshare" class="anchor" href="#uiactivitycategoryshare" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UIActivityCategoryShare</h3>

<ul>
<li><code>UIActivityTypeMessage</code></li>
<li><code>UIActivityTypeMail</code></li>
<li><code>UIActivityTypePostToFacebook</code></li>
<li><code>UIActivityTypePostToTwitter</code></li>
<li><code>UIActivityTypePostToFlickr</code></li>
<li><code>UIActivityTypePostToVimeo</code></li>
<li><code>UIActivityTypePostToTencentWeibo</code></li>
<li><code>UIActivityTypePostToWeibo</code></li>
</ul>

<p>Each activity type supports a number of different data types. For example, a Tweet might be composed of an <code>NSString</code>, along with an attached image and/or URL.</p>

<h3><a id="user-content-supported-data-types-by-activity-type" class="anchor" href="#supported-data-types-by-activity-type" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported Data Types by Activity Type</h3>

<table>
    <thead>
        <tr>
            <th>Activity Type</th>
            <th>String</th>
            <th>Attributed String</th>
            <th>URL</th>
            <th>Data</th>
            <th>Image</th>
            <th>Asset</th>
            <th>Other</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Post To Facebook</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Twitter</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Weibo</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Message</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓*</td>
            <td>✓*</td>
            <td></td>
            <td>✓*</td>
            <td><tt>sms://</tt> <tt>NSURL</tt></td>
        </tr>
        <tr>
            <td>Mail</td>
            <td>✓+</td>
            <td>✓+</td>
            <td>✓+</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Print</td>
            <td></td>
            <td></td>
            <td></td>
            <td>✓+</td>
            <td>✓+</td>
            <td></td>
            <td><tt>UIPrintPageRenderer</tt>, <tt>UIPrintFormatter</tt>, &amp; <tt>UIPrintInfo</tt></td>
        </tr>
        <tr>
            <td>Copy To Pasteboard</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td><tt>UIColor</tt>, <tt>NSDictionary</tt></td>
        </tr>
        <tr>
            <td>Assign To Contact</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Save To Camera Roll</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Add To Reading List</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Flickr</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Vimeo</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Tencent Weibo</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>AirDrop</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
    </tbody>
</table>

<h2><a id="user-content-uiactivityitemsource--uiactivityitemprovider" class="anchor" href="#uiactivityitemsource--uiactivityitemprovider" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>&lt;UIActivityItemSource&gt;</code> &amp; <code>UIActivityItemProvider</code></h2>

<p>Similar to how a <a href="https://developer.apple.com/library/mac/documentation/cocoa/reference/NSPasteboardItem_Class/Reference/Reference.html">pasteboard item</a> can be used to provide data only when necessary, in order to avoid excessive memory allocation or processing time, activity items can be of a custom type.</p>

<p>Any object conforming to <code>&lt;UIActivityItemSource&gt;</code>, including the built-in <code>UIActivityItemProvider</code> class, can be used to dynamically provide different kinds of data depending on the activity type.</p>

<h3><a id="user-content-uiactivityitemsource" class="anchor" href="#uiactivityitemsource" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>&lt;UIActivityItemSource&gt;</code></h3>

<h4><a id="user-content-getting-the-data-items" class="anchor" href="#getting-the-data-items" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting the Data Items</h4>

<ul>
<li><code>activityViewControllerPlaceholderItem:</code></li>
<li><code>activityViewController:itemForActivityType:</code></li>
</ul>

<h4><a id="user-content-providing-information-about-the-data-items" class="anchor" href="#providing-information-about-the-data-items" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Providing Information About the Data Items</h4>

<ul>
<li><code>activityViewController:subjectForActivityType:</code></li>
<li><code>activityViewController:dataTypeIdentifierForActivityType:</code></li>
<li><code>activityViewController:thumbnailImageForActivityType:suggestedSize:</code></li>
</ul>

<p>One example of how this could be used is to customize a message, depending on whether it's to be shared on Facebook or Twitter.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">func</span> <span class="pl-en">activityViewController</span>(activityViewController: UIActivityViewController, <span class="pl-en">itemForActivityType</span> <span class="pl-smi">activityType</span>: <span class="pl-c1">String</span>) <span class="pl-k">-&gt;</span> <span class="pl-c1">AnyObject</span>? {
    <span class="pl-k">if</span> activityType <span class="pl-k">==</span> UIActivityTypePostToFacebook {
        <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">"</span>Like this!<span class="pl-pds">"</span></span>, comment: <span class="pl-s"><span class="pl-pds">"</span>comment<span class="pl-pds">"</span></span>)
    } <span class="pl-k">else</span> <span class="pl-k">if</span> activityType <span class="pl-k">==</span> UIActivityTypePostToTwitter {
        <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">"</span>Retweet this!<span class="pl-pds">"</span></span>, comment: <span class="pl-s"><span class="pl-pds">"</span>comment<span class="pl-pds">"</span></span>)
    } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> <span class="pl-c1">nil</span>
    }
}</pre></div>

<div class="highlight highlight-source-objc"><pre>- (<span class="pl-c1">id</span>)activityViewController:(UIActivityViewController *)activityViewController
         itemForActivityType:(<span class="pl-c1">NSString</span> *)activityType
{
    <span class="pl-k">if</span> ([activityType <span class="pl-c1">isEqualToString:</span>UIActivityTypePostToFacebook]) {
        <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">@"</span>Like this!<span class="pl-pds">"</span></span>);
    } <span class="pl-k">else</span> <span class="pl-k">if</span> ([activityType <span class="pl-c1">isEqualToString:</span>UIActivityTypePostToTwitter]) {
        <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">@"</span>Retweet this!<span class="pl-pds">"</span></span>);
    } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> <span class="pl-c1">nil</span>;
    }
}</pre></div>

<h2><a id="user-content-creating-a-custom-uiactivity" class="anchor" href="#creating-a-custom-uiactivity" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Custom UIActivity</h2>

<p>In addition to the aforementioned system-provided activities, its possible to create your own activity.</p>

<p>As an example, let's create a custom activity type that takes an image URL and applies a mustache to it using <a href="http://mustache.me">mustache.me</a>.</p>

<table>
    <tbody><tr>
        <td><a href="{{ site.asseturl }}/jony-ive-unstache.png" target="_blank"><img alt="Jony Ive Before" src="{{ site.asseturl }}/jony-ive-unstache.png" style="max-width:100%;"></a></td>
        <td><a href="{{ site.asseturl }}/jony-ive-mustache.png" target="_blank"><img alt="Jony Ive After" src="{{ site.asseturl }}/jony-ive-mustache.png" style="max-width:100%;"></a></td>
    </tr>
    <tr>
        <td>Before</td>
        <td>After</td>
    </tr>
</tbody></table>

<p>First, we define a <a href="http://en.wikipedia.org/wiki/Reverse_domain_name_notation">reverse-DNS identifier</a> for the activity type: </p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> HIPMustachifyActivityType <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>com.nshipster.activity.Mustachify<span class="pl-pds">"</span></span></pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">static</span> <span class="pl-c1">NSString</span> * <span class="pl-k">const</span> HIPMustachifyActivityType = <span class="pl-s"><span class="pl-pds">@"</span>com.nshipster.activity.Mustachify<span class="pl-pds">"</span></span>;</pre></div>

<p>Then specify the category as <code>UIActivityCategoryAction</code> and provide a localized title &amp; iOS version appropriate image:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">// MARK: - UIActivity</span>

<span class="pl-k">override</span> <span class="pl-k">class</span> <span class="pl-k">func</span> <span class="pl-en">activityCategory</span>() <span class="pl-k">-&gt;</span> UIActivityCategory {
    <span class="pl-k">return</span> <span class="pl-k">.</span>Action
}

<span class="pl-k">override</span> <span class="pl-k">func</span> <span class="pl-en">activityType</span>() <span class="pl-k">-&gt;</span> <span class="pl-c1">String</span>? {
    <span class="pl-k">return</span> HIPMustachifyActivityType
}

<span class="pl-k">override</span> <span class="pl-k">func</span> <span class="pl-en">activityTitle</span>() <span class="pl-k">-&gt;</span> <span class="pl-c1">String</span>? {
    <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">"</span>Mustachify<span class="pl-pds">"</span></span>, comment: <span class="pl-s"><span class="pl-pds">"</span>comment<span class="pl-pds">"</span></span>)
}

<span class="pl-k">override</span> <span class="pl-k">func</span> <span class="pl-en">activityImage</span>() <span class="pl-k">-&gt;</span> UIImage? {
    <span class="pl-k">if</span> #available(iOS <span class="pl-c1">7</span><span class="pl-k">.</span><span class="pl-c1">0</span>, <span class="pl-k">*</span>) {
        <span class="pl-k">return</span> UIImage(named: <span class="pl-s"><span class="pl-pds">"</span>MustachifyUIActivity7<span class="pl-pds">"</span></span>)
    } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> UIImage(named: <span class="pl-s"><span class="pl-pds">"</span>MustachifyUIActivity<span class="pl-pds">"</span></span>)
    }
}</pre></div>

<div class="highlight highlight-source-objc"><pre>#<span class="pl-k">pragma mark</span> - UIActivity

+ (UIActivityCategory)activityCategory {
    <span class="pl-k">return</span> UIActivityCategoryAction;
}

- (<span class="pl-c1">NSString</span> *)activityType {
    <span class="pl-k">return</span> HIPMustachifyActivityType;
}

- (<span class="pl-c1">NSString</span> *)activityTitle {
    <span class="pl-k">return</span> NSLocalizedString(<span class="pl-s"><span class="pl-pds">@"</span>Mustachify<span class="pl-pds">"</span></span>, <span class="pl-c1">nil</span>);
}

- (UIImage *)activityImage {
    <span class="pl-k">if</span> (<span class="pl-c1">NSFoundationVersionNumber</span> &gt; NSFoundationVersionNumber_iOS_6_1) {
        <span class="pl-k">return</span> [UIImage <span class="pl-c1">imageNamed:</span><span class="pl-s"><span class="pl-pds">@"</span>MustachifyUIActivity7<span class="pl-pds">"</span></span>];
    } <span class="pl-k">else</span> {
        <span class="pl-k">return</span> [UIImage <span class="pl-c1">imageNamed:</span><span class="pl-s"><span class="pl-pds">@"</span>MustachifyUIActivity<span class="pl-pds">"</span></span>];
    }
}</pre></div>

<p>Next, we create a helper function, <code>HIPMatchingURLsInActivityItems</code>, which returns an array of any image URLs of the supported type.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">func</span> <span class="pl-en">HIPMatchingURLsInActivityItems</span>(activityItems: [<span class="pl-c1">AnyObject</span>]) <span class="pl-k">-&gt;</span> [<span class="pl-c1">AnyObject</span>] {
    <span class="pl-k">return</span> activityItems<span class="pl-k">.</span><span class="pl-c1">filter</span> {
        <span class="pl-k">if</span> <span class="pl-k">let</span> url <span class="pl-k">=</span> $<span class="pl-c1">0</span> <span class="pl-k">as?</span> NSURL <span class="pl-k">where</span> <span class="pl-k">!</span>url<span class="pl-k">.</span>fileURL {
            <span class="pl-k">return</span> url<span class="pl-k">.</span>pathExtension?<span class="pl-k">.</span>caseInsensitiveCompare(<span class="pl-s"><span class="pl-pds">"</span>jpg<span class="pl-pds">"</span></span>) <span class="pl-k">==</span> <span class="pl-k">.</span>OrderedSame
                <span class="pl-k">||</span> url<span class="pl-k">.</span>pathExtension?<span class="pl-k">.</span>caseInsensitiveCompare(<span class="pl-s"><span class="pl-pds">"</span>png<span class="pl-pds">"</span></span>) <span class="pl-k">==</span> <span class="pl-k">.</span>OrderedSame
        }

        <span class="pl-k">return</span> <span class="pl-c1">false</span>
    }
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">static</span> <span class="pl-c1">NSArray</span> * <span class="pl-en">HIPMatchingURLsInActivityItems</span>(<span class="pl-c1">NSArray</span> *activityItems) {
    <span class="pl-k">return</span> [activityItems <span class="pl-c1">filteredArrayUsingPredicate:</span>[<span class="pl-c1">NSPredicate</span> <span class="pl-c1">predicateWithBlock:</span>
    ^<span class="pl-c1">BOOL</span>(<span class="pl-c1">id</span> item, __unused <span class="pl-c1">NSDictionary</span> *bindings) {
        <span class="pl-k">if</span> ([item <span class="pl-c1">isKindOfClass:</span>[<span class="pl-c1">NSURL</span> <span class="pl-c1">class</span>]] &amp;&amp;
            ![(<span class="pl-c1">NSURL</span> *)item <span class="pl-c1">isFileURL</span>]) {
            <span class="pl-k">return</span> [[(<span class="pl-c1">NSURL</span> *)item <span class="pl-c1">pathExtension</span>] <span class="pl-c1">caseInsensitiveCompare:</span><span class="pl-s"><span class="pl-pds">@"</span>jpg<span class="pl-pds">"</span></span>] == NSOrderedSame ||
            [[(<span class="pl-c1">NSURL</span> *)item <span class="pl-c1">pathExtension</span>] <span class="pl-c1">caseInsensitiveCompare:</span><span class="pl-s"><span class="pl-pds">@"</span>png<span class="pl-pds">"</span></span>] == NSOrderedSame;
        }

        <span class="pl-k">return</span> <span class="pl-c1">NO</span>;
    }]];
}</pre></div>

<p>This function is then used in <code>-canPerformWithActivityItems:</code> and <code>prepareWithActivityItems:</code> to get the mustachio'd image URL of the first PNG or JPEG, if any.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">override</span> <span class="pl-k">func</span> <span class="pl-en">canPerformWithActivityItems</span>(activityItems: [<span class="pl-c1">AnyObject</span>]) <span class="pl-k">-&gt;</span> <span class="pl-c1">Bool</span> {
    <span class="pl-k">return</span> HIPMatchingURLsInActivityItems(activityItems)<span class="pl-k">.</span><span class="pl-c1">count</span> <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>
}

<span class="pl-k">override</span> <span class="pl-k">func</span> <span class="pl-en">prepareWithActivityItems</span>(activityItems: [<span class="pl-c1">AnyObject</span>]) {
    <span class="pl-k">let</span> HIPMustachifyMeURLFormatString <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>http://mustachify.me/%d?src=%@<span class="pl-pds">"</span></span>

    <span class="pl-k">if</span> <span class="pl-k">let</span> firstMatch <span class="pl-k">=</span> HIPMatchingURLsInActivityItems(activityItems)<span class="pl-k">.</span><span class="pl-c1">first</span>, mustacheType <span class="pl-k">=</span> <span class="pl-k">self</span><span class="pl-k">.</span>mustacheType {
        imageURL <span class="pl-k">=</span> NSURL(string: <span class="pl-c1">String</span>(format: HIPMustachifyMeURLFormatString, [mustacheType, firstMatch]))
    }

    <span class="pl-c">// ...</span>
}</pre></div>

<div class="highlight highlight-source-objc"><pre>- (<span class="pl-c1">BOOL</span>)canPerformWithActivityItems:(<span class="pl-c1">NSArray</span> *)activityItems {
    <span class="pl-k">return</span> [<span class="pl-c1">HIPMatchingURLsInActivityItems</span>(activityItems) <span class="pl-c1">count</span>] &gt; <span class="pl-c1">0</span>;
}

- (<span class="pl-k">void</span>)prepareWithActivityItems:(<span class="pl-c1">NSArray</span> *)activityItems {
    <span class="pl-k">static</span> <span class="pl-c1">NSString</span> * <span class="pl-k">const</span> HIPMustachifyMeURLFormatString = <span class="pl-s"><span class="pl-pds">@"</span>http://mustachify.me/<span class="pl-c1">%d</span>?src=<span class="pl-c1">%@</span><span class="pl-pds">"</span></span>;

    self.<span class="pl-smi">imageURL</span> = [<span class="pl-c1">NSURL</span> <span class="pl-c1">URLWithString:</span>[<span class="pl-c1">NSString</span> <span class="pl-c1">stringWithFormat:</span>HIPMustachifyMeURLFormatString, <span class="pl-v">self</span>.mustacheType, [<span class="pl-c1">HIPMatchingURLsInActivityItems</span>(activityItems) <span class="pl-c1">firstObject</span>]]];
}</pre></div>

<p>Our webservice provides a variety of mustache options, which are defined in an enumeration:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">enum</span> HIPMustacheType: <span class="pl-c1">Int</span> {
    <span class="pl-k">case</span> English, Horseshoe, Imperial, Chevron, Natural, Handlebar
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">typedef</span> <span class="pl-en">NS_ENUM</span>(<span class="pl-c1">NSInteger</span>, HIPMustacheType) {
    HIPMustacheTypeEnglish,
    HIPMustacheTypeHorseshoe,
    HIPMustacheTypeImperial,
    HIPMustacheTypeChevron,
    HIPMustacheTypeNatural,
    HIPMustacheTypeHandlebar,
};</pre></div>

<p>Finally, we provide a <code>UIViewController</code> to display the image. For this example, a simple <code>UIWebView</code> controller suffices.</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">class</span> HIPMustachifyWebViewController: UIViewController, UIWebViewDelegate {
    <span class="pl-k">var</span> webView: UIWebView { <span class="pl-k">get</span> }
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">@interface</span> <span class="pl-en">HIPMustachifyWebViewController</span> : <span class="pl-e">UIViewController</span> &lt;UIWebViewDelegate&gt;
<span class="pl-k">@property</span> (<span class="pl-k">readonly</span>, <span class="pl-k">nonatomic</span>, <span class="pl-k">strong</span>) UIWebView *webView;
<span class="pl-k">@end</span></pre></div>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">func</span> <span class="pl-en">activityViewController</span>() <span class="pl-k">-&gt;</span> UIViewController {
    <span class="pl-k">let</span> webViewController <span class="pl-k">=</span> HIPMustachifyWebViewController()

    <span class="pl-k">let</span> request <span class="pl-k">=</span> NSURLRequest(URL: imageURL)
    webViewController<span class="pl-k">.</span>webView<span class="pl-k">.</span>loadRequest(request)

    <span class="pl-k">return</span> webViewController
}</pre></div>

<div class="highlight highlight-source-objc"><pre>- (UIViewController *)activityViewController {
    HIPMustachifyWebViewController *webViewController = [[HIPMustachifyWebViewController <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];

    <span class="pl-c1">NSURLRequest</span> *request = [<span class="pl-c1">NSURLRequest</span> <span class="pl-c1">requestWithURL:</span><span class="pl-v">self</span>.imageURL];
    [webViewController.webView <span class="pl-c1">loadRequest:</span>request];

    <span class="pl-k">return</span> webViewController;
}</pre></div>

<p>To use our brand new mustache activity, we simply pass it in the <code>UIActivityViewController initializer</code>:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> mustacheActivity <span class="pl-k">=</span> HIPMustachifyActivity()
<span class="pl-k">let</span> activityViewController <span class="pl-k">=</span> UIActivityViewController(activityItems: [imageURL], applicationActivities: [mustacheActivity])</pre></div>

<div class="highlight highlight-source-objc"><pre>HIPMustachifyActivity *mustacheActivity = [[HIPMustachifyActivity <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];
UIActivityViewController *activityViewController =
  [[UIActivityViewController <span class="pl-c1">alloc</span>] <span class="pl-c1">initWithActivityItems:</span>@[imageURL]
                                    <span class="pl-c1">applicationActivities:</span>@[mustacheActivity]];</pre></div>

<h2><a id="user-content-invoking-actions-manually" class="anchor" href="#invoking-actions-manually" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Invoking Actions Manually</h2>

<p>Now is a good time to be reminded that while <code>UIActivityViewController</code> allows users to perform actions of their choosing, sharing can still be invoked manually, when the occasion arises.</p>

<p>So for completeness, here's how one might go about performing some of these actions manually:</p>

<h3><a id="user-content-open-url" class="anchor" href="#open-url" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Open URL</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">if</span> <span class="pl-k">let</span> URL <span class="pl-k">=</span> NSURL(string: <span class="pl-s"><span class="pl-pds">"</span>http://nshipster.com<span class="pl-pds">"</span></span>) {
    UIApplication<span class="pl-k">.</span>sharedApplication()<span class="pl-k">.</span>openURL(URL)
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSURL</span> *URL = [<span class="pl-c1">NSURL</span> <span class="pl-c1">URLWithString:</span><span class="pl-s"><span class="pl-pds">@"</span>http://nshipster.com<span class="pl-pds">"</span></span>];
[[UIApplication <span class="pl-c1">sharedApplication</span>] <span class="pl-c1">openURL:</span>URL];</pre></div>

<p>System-supported URL schemes include: <code>mailto:</code>, <code>tel:</code>, <code>sms:</code>, and <code>maps:</code>.</p>

<h3><a id="user-content-add-to-safari-reading-list" class="anchor" href="#add-to-safari-reading-list" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add to Safari Reading List</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">SafariServices</span>

<span class="pl-k">if</span> <span class="pl-k">let</span> URL <span class="pl-k">=</span> NSURL(string: <span class="pl-s"><span class="pl-pds">"</span>http://nshipster.com/uiactivityviewcontroller<span class="pl-pds">"</span></span>) {
    <span class="pl-k">let</span> _ <span class="pl-k">=</span> <span class="pl-k">try</span>? SSReadingList<span class="pl-k">.</span>defaultReadingList()?<span class="pl-k">.</span>addReadingListItemWithURL(URL,
        title: <span class="pl-s"><span class="pl-pds">"</span>NSHipster<span class="pl-pds">"</span></span>,
        previewText: <span class="pl-s"><span class="pl-pds">"</span>...<span class="pl-pds">"</span></span>
    )
}</pre></div>

<div class="highlight highlight-source-objc"><pre>@import SafariServices;

<span class="pl-c1">NSURL</span> *URL = [<span class="pl-c1">NSURL</span> <span class="pl-c1">URLWithString:</span><span class="pl-s"><span class="pl-pds">@"</span>http://nshipster.com/uiactivityviewcontroller<span class="pl-pds">"</span></span>];
[[SSReadingList <span class="pl-c1">defaultReadingList</span>] <span class="pl-c1">addReadingListItemWithURL:</span>URL
                                                        <span class="pl-c1">title:</span><span class="pl-s"><span class="pl-pds">@"</span>NSHipster<span class="pl-pds">"</span></span>
                                                  <span class="pl-c1">previewText:</span><span class="pl-s"><span class="pl-pds">@"</span>...<span class="pl-pds">"</span></span>
                                                        <span class="pl-c1">error:</span><span class="pl-c1">nil</span>];</pre></div>

<h3><a id="user-content-add-to-saved-photos" class="anchor" href="#add-to-saved-photos" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add to Saved Photos</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> image: UIImage <span class="pl-k">=</span> <span class="pl-k">...</span>
<span class="pl-k">let</span> completionTarget: <span class="pl-c1">AnyObject</span> <span class="pl-k">=</span> <span class="pl-k">self</span>
<span class="pl-k">let</span> completionSelector: Selector <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>didWriteToSavedPhotosAlbum<span class="pl-pds">"</span></span>
<span class="pl-k">let</span> contextInfo: <span class="pl-c1">UnsafeMutablePointer</span><span class="pl-k">&lt;</span><span class="pl-c1">Void</span><span class="pl-k">&gt;</span> <span class="pl-k">=</span> <span class="pl-c1">nil</span>

UIImageWriteToSavedPhotosAlbum(image, completionTarget, completionSelector, contextInfo)</pre></div>

<div class="highlight highlight-source-objc"><pre>UIImage *image = ...;
<span class="pl-c1">id</span> completionTarget = self;
<span class="pl-c1">SEL</span> completionSelector = <span class="pl-k">@selector</span>(<span class="pl-c1">didWriteToSavedPhotosAlbum</span>);
<span class="pl-k">void</span> *contextInfo = <span class="pl-c1">NULL</span>;
<span class="pl-en">UIImageWriteToSavedPhotosAlbum</span>(image, completionTarget, completionSelector, contextInfo);</pre></div>

<h3><a id="user-content-send-sms" class="anchor" href="#send-sms" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send SMS</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">MessageUI</span>

<span class="pl-k">let</span> messageComposeViewController <span class="pl-k">=</span> MFMessageComposeViewController()
messageComposeViewController<span class="pl-k">.</span>messageComposeDelegate <span class="pl-k">=</span> <span class="pl-k">self</span>
messageComposeViewController<span class="pl-k">.</span>recipients <span class="pl-k">=</span> [<span class="pl-s"><span class="pl-pds">"</span>mattt@nshipster•com<span class="pl-pds">"</span></span>]
messageComposeViewController<span class="pl-k">.</span>body <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Lorem ipsum dolor sit amet<span class="pl-pds">"</span></span>
navigationController?<span class="pl-k">.</span>presentViewController(messageComposeViewController, animated: <span class="pl-c1">true</span>) {
    <span class="pl-c">// ...</span>
}</pre></div>

<div class="highlight highlight-source-objc"><pre>@import MessageUI;

MFMessageComposeViewController *messageComposeViewController = [[MFMessageComposeViewController <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];
messageComposeViewController.messageComposeDelegate = self;
messageComposeViewController.recipients = @[<span class="pl-s"><span class="pl-pds">@"</span>mattt@nshipster•com<span class="pl-pds">"</span></span>];
messageComposeViewController.body = <span class="pl-s"><span class="pl-pds">@"</span>Lorem ipsum dolor sit amet<span class="pl-pds">"</span></span>;
[navigationController <span class="pl-c1">presentViewController:</span>messageComposeViewController <span class="pl-c1">animated:</span><span class="pl-c1">YES</span> <span class="pl-c1">completion:</span>^{
    <span class="pl-c">// ...</span>
}];</pre></div>

<h3><a id="user-content-send-email" class="anchor" href="#send-email" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Send Email</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">MessageUI</span>

<span class="pl-k">let</span> mailComposeViewController <span class="pl-k">=</span> MFMailComposeViewController()
mailComposeViewController<span class="pl-k">.</span>mailComposeDelegate <span class="pl-k">=</span> <span class="pl-k">self</span>
mailComposeViewController<span class="pl-k">.</span>setToRecipients([<span class="pl-s"><span class="pl-pds">"</span>mattt@nshipster•com<span class="pl-pds">"</span></span>])
mailComposeViewController<span class="pl-k">.</span>setSubject(<span class="pl-s"><span class="pl-pds">"</span>Hello<span class="pl-pds">"</span></span>)
mailComposeViewController<span class="pl-k">.</span>setMessageBody(<span class="pl-s"><span class="pl-pds">"</span>Lorem ipsum dolor sit amet<span class="pl-pds">"</span></span>, isHTML: <span class="pl-c1">false</span>)
navigationController?<span class="pl-k">.</span>presentViewController(mailComposeViewController, animated: <span class="pl-c1">true</span>) {
    <span class="pl-c">// ...</span>
}</pre></div>

<div class="highlight highlight-source-objc"><pre>@import MessageUI;

MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController <span class="pl-c1">alloc</span>] <span class="pl-c1">init</span>];
mailComposeViewController.mailComposeDelegate = self;
[mailComposeViewController <span class="pl-c1">setToRecipients:</span>@[<span class="pl-s"><span class="pl-pds">@"</span>mattt@nshipster•com<span class="pl-pds">"</span></span>]];
[mailComposeViewController <span class="pl-c1">setSubject:</span><span class="pl-s"><span class="pl-pds">@"</span>Hello<span class="pl-pds">"</span></span>];
[mailComposeViewController <span class="pl-c1">setMessageBody:</span><span class="pl-s"><span class="pl-pds">@"</span>Lorem ipsum dolor sit amet<span class="pl-pds">"</span></span>
                                   <span class="pl-c1">isHTML:</span><span class="pl-c1">NO</span>];
[navigationController <span class="pl-c1">presentViewController:</span>mailComposeViewController <span class="pl-c1">animated:</span><span class="pl-c1">YES</span> <span class="pl-c1">completion:</span>^{
    <span class="pl-c">// ...</span>
}];</pre></div>

<h3><a id="user-content-post-tweet" class="anchor" href="#post-tweet" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Post Tweet</h3>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">Social</span>

<span class="pl-k">let</span> tweetComposeViewController <span class="pl-k">=</span> SLComposeViewController(forServiceType: SLServiceTypeTwitter)
tweetComposeViewController<span class="pl-k">.</span>setInitialText(<span class="pl-s"><span class="pl-pds">"</span>Lorem ipsum dolor sit amet.<span class="pl-pds">"</span></span>)
navigationController?<span class="pl-k">.</span>presentViewController(tweetComposeViewController, animated: <span class="pl-c1">true</span>) {
    <span class="pl-c">// ...</span>
}</pre></div>

<div class="highlight highlight-source-objc"><pre>@import Social;

SLComposeViewController *tweetComposeViewController = [SLComposeViewController <span class="pl-c1">composeViewControllerForServiceType:</span>SLServiceTypeTwitter];
[tweetComposeViewController <span class="pl-c1">setInitialText:</span><span class="pl-s"><span class="pl-pds">@"</span>Lorem ipsum dolor sit amet.<span class="pl-pds">"</span></span>];
[<span class="pl-v">self</span>.navigationController <span class="pl-c1">presentViewController:</span>tweetComposeViewController
                                        <span class="pl-c1">animated:</span><span class="pl-c1">YES</span>
                                      <span class="pl-c1">completion:</span>^{
                                          <span class="pl-c">// ...</span>
                                      }];</pre></div>

<h2><a id="user-content-intentkit" class="anchor" href="#intentkit" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IntentKit</h2>

<p>While all of this is impressive and useful, there is a particular lacking in the activities paradigm in iOS, when compared to the rich <a href="http://developer.android.com/guide/components/intents-filters.html">Intents Model</a> found on Android.</p>

<p>On Android, apps can register for different intents, to indicate that they can be used for Maps, or as a Browser, and be selected as the default app for related activities, like getting directions, or bookmarking a URL.</p>

<p>While iOS lacks the extensible infrastructure to support this, a 3rd-party library called <a href="https://github.com/intentkit/IntentKit">IntentKit</a>, by <a href="https://github.com/lazerwalker">@lazerwalker</a> (of <a href="http://goshdarnblocksyntax.com">f*ingblocksyntax.com</a> fame), is an interesting example of how we might narrow the gap ourselves.</p>

<p><a href="https://camo.githubusercontent.com/89036df085bf5782cda01b5c156b7279186f6a58/68747470733a2f2f7261772e6769746875622e636f6d2f696e74656e746b69742f496e74656e744b69742f6d61737465722f6578616d706c652e676966" target="_blank"><img src="https://camo.githubusercontent.com/89036df085bf5782cda01b5c156b7279186f6a58/68747470733a2f2f7261772e6769746875622e636f6d2f696e74656e746b69742f496e74656e744b69742f6d61737465722f6578616d706c652e676966" alt="IntentKit" data-canonical-src="https://raw.github.com/intentkit/IntentKit/master/example.gif" style="max-width:100%;"></a></p>

<p>Normally, a developer would have to do a lot of work to first, determine whether a particular app is installed, and how to construct a URL to support a particular activity.</p>

<p>IntentKit consolidates the logic of connecting to the most popular Web, Maps, Mail, Twitter, Facebook, and Google+ clients, in a UI similar to <code>UIActivityViewController</code>.</p>

<p>Anyone looking to take their sharing experience to the next level should definitely give this a look.</p>

<hr>

<p>There is a strong argument to be made that the longterm viability of iOS as a platform depends on sharing mechanisms like <code>UIActivityViewController</code>. As the saying goes, "Information wants to be free". And anything that stands in the way of federation will ultimately lose to something that does not.</p>

<p>The future prospects of public <a href="http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/">remote view controller</a> APIs gives me hope for the future of sharing on iOS. For now, though, we could certainly do much worse than <code>UIActivityViewController</code>.</p>
</article></div>