<div class="announce instapaper_body md" data-path="2015-05-11-xcplayground.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>author</th>

  <th>category</th>

  <th>tags</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>XCPlayground</div></td>

  <td><div>Nate Cook</div></td>

  <td><div>Swift</div></td>

  <td><div>swift</div></td>

  <td><div>Playgrounds aren't a feature of the Swift language *per se*—instead, they are a terrific showcase for all that Swift has to offer, from its efficiency and power to its opacity and depth. Take a look past the surface of Playgrounds, at tools that make them a powerful part of the development process: sources and resources, captured values and extended execution, and integrated rich formatting that can transform a Playground into an interactive teaching tool.</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>1.2</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<blockquote>
<p>Stop right there! Given the topic, wouldn't you rather read this article as a Playground? <strong><a href="{{ site.asseturl }}/XCPlayground.playground.zip">Download Now →</a></strong></p>
</blockquote>

<p><em>Play.</em></p>

<p>Given the association of play with childish exuberance, one could define <em>play</em> as the opposite of <em>work</em>. And yet, the elements of play are what we do in our line of work every day: experimentation, exploration, discovery. </p>

<p>Playgrounds aren't a feature of the Swift language <em>per se</em>—instead, they are a terrific showcase for all that Swift has to offer, from its efficiency and power to its opacity and depth. Playgrounds make it truly simple to create a working program—indeed, every new Playground starts with the soon-familiar <code>"Hello, playground"</code>. At the same time, Playgrounds hide some of their most powerful features, leaving exploration as the only means to discovering their rapidly advancing capabilities.</p>

<p>This week, we'll take a look past the surface of Playgrounds, giving you tools to make them a powerful part of your development process. Read on for more about Playground sources and resources, captured values and extended execution, and integrated rich formatting that can transform a Playground into an interactive teaching tool.</p>

<blockquote>
<p><strong>Note:</strong> The digital version of the recently released <a href="http://gum.co/nshipster-swift"><em>NSHipster: Obscure Topics in Cocoa &amp; Swift</em></a> includes a package of Playgrounds—one for every chapter in the book. Each Playground provides a chance to explore and experiment with the concepts presented therein, including extended examples. </p>
</blockquote>

<h2><a id="user-content-sources" class="anchor" href="#sources" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sources</h2>

<p>The revamped Playground package structure includes a "Sources" folder for code that is more stable than experimental. All files in the "Sources" directory are compiled (just once, not every time you press a key) into a single module and automatically imported into the Playground. In addition to simplifying the code in your Playground, this compilation <em>drastically</em> speeds up execution. This means that if I have defined a type, function, or global constant in those files with <code>public</code> accessibility, I can use it in a Playground without further ado:</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-sources.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-sources.png" alt="Compiled Sources" style="max-width:100%;"></a></p>

<p>To get started in your own Playground, open the Project Navigator (⌘1) and expand the Playground file to see the "Sources" directory.</p>

<h3><a id="user-content-importing-frameworks" class="anchor" href="#importing-frameworks" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Importing Frameworks</h3>

<p>To import an external framework, create a new Xcode Workspace that contains both the framework project and your Playground. After building the framework, it can be imported with a standard <code>import</code> statement.</p>

<h2><a id="user-content-resources" class="anchor" href="#resources" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resources</h2>

<p>No playground is complete without a sandbox to play in, and Swift Playgrounds don't disappoint. Playgrounds have <em>two</em> places to keep associated resources: one local to each individual playground and a second shared amongst all of them. Being able to load and work with XML, JSON data, XIBs, and images extends the usefulness of your Playground experimentation.</p>

<h3><a id="user-content-local" class="anchor" href="#local" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local</h3>

<p>The <code>Resources</code> folder, embedded in the Playground package alongside <code>Sources</code>, is visible in the Project Navigator—simply drag and drop images or data files to use them in your Playground. The contents are then available via the main bundle. For example, we can easily load a JSON file filled with weather data:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> jsonPath <span class="pl-k">=</span> NSBundle<span class="pl-k">.</span>mainBundle()<span class="pl-k">.</span>bundlePath<span class="pl-k">.</span>stringByAppendingPathComponent(<span class="pl-s"><span class="pl-pds">"</span>weather.json<span class="pl-pds">"</span></span>)
<span class="pl-k">if</span> <span class="pl-k">let</span>
   jsonData <span class="pl-k">=</span> NSData(contentsOfFile: jsonPath),
   json <span class="pl-k">=</span> NSJSONSerialization<span class="pl-k">.</span>JSONObjectWithData(jsonData, options: <span class="pl-c1">nil</span>, error: <span class="pl-c1">nil</span>) <span class="pl-k">as?</span> [<span class="pl-c1">String</span>: <span class="pl-c1">AnyObject</span>] 
{
    <span class="pl-c">// ...</span>
}</pre></div>

<h3><a id="user-content-shared" class="anchor" href="#shared" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shared</h3>

<p>The contents of a "Shared Playground Data" directory inside your "Documents" folder are available to any Playground you create. Access the shared folder via the <code>XCPSharedDataDirectoryPath</code> constant.</p>

<blockquote>
<p>To try this out yourself, you'll need to create the directory at "~/Documents/Shared Playground Data". Here we're attempting to load an image named "image.png":</p>
</blockquote>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">let</span> sharedImagePath <span class="pl-k">=</span> XCPSharedDataDirectoryPath<span class="pl-k">.</span>stringByAppendingPathComponent(<span class="pl-s"><span class="pl-pds">"</span>image.png<span class="pl-pds">"</span></span>)
<span class="pl-k">if</span> <span class="pl-k">let</span> image <span class="pl-k">=</span> UIImage(contentsOfFile: sharedImagePath) {
   <span class="pl-c">// ...</span>
}</pre></div>

<h2><a id="user-content-captured-values" class="anchor" href="#captured-values" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Captured Values</h2>

<p>A Playground normally shows the results of simple expressions immediately. Arrays, strings, numbers, and more have their values shown in the results pane as they are calculated. But what about values that change over time?</p>

<p>By using the <code>XCPCaptureValue()</code> function, we can build a graph of a changing value over a series of iterations. Returning to our weather sample, let's take a look at the hourly temperatures in the data, using <code>XCPCaptureValue</code> to display the value of <code>temperature</code> in the Assistant Editor's timeline view:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">XCPlayground</span>

<span class="pl-k">for</span> forecast <span class="pl-k">in</span> forecasts {
    <span class="pl-k">if</span> <span class="pl-k">let</span>
        tempString <span class="pl-k">=</span> forecast[<span class="pl-s"><span class="pl-pds">"</span>temp<span class="pl-pds">"</span></span>]?[<span class="pl-s"><span class="pl-pds">"</span>english<span class="pl-pds">"</span></span>] <span class="pl-k">as?</span> <span class="pl-c1">String</span>,
        temperature <span class="pl-k">=</span> tempString<span class="pl-k">.</span>toInt()
    {
        XCPCaptureValue(<span class="pl-s"><span class="pl-pds">"</span>Temperature<span class="pl-pds">"</span></span>, temperature)
    }
}</pre></div>

<p>Alternatively, choosing <strong>Editor → Show Result For Current Line</strong> will capture the current line's values and display the chart directly in the flow of the Playground:</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-capture.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-capture.png" alt="Result for Current Line" style="max-width:100%;"></a></p>

<h2><a id="user-content-asynchronous-execution" class="anchor" href="#asynchronous-execution" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Asynchronous Execution</h2>

<p>Unlike most Swift code that is written as part of an app or framework, Playgrounds are treated as <em>top-level code.</em> Top-level code in a Playground is executed instruction-by-instruction in order, from top to bottom. This container-less style of execution provides immediate feedback, but there is one problem: execution halts as soon as it reaches the end of the Playground. Network requests, timers, and long-running background queues are abandoned before they can return to report on success or failure.</p>

<p>To keep execution going long enough to see the results of these kinds of asynchronous operations, the <code>XCPlayground</code> module includes a function that extends the length of the process:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">import</span> <span class="pl-c1">XCPlayground</span>

XCPSetExecutionShouldContinueIndefinitely(continueIndefinitely: <span class="pl-c1">true</span>)

<span class="pl-k">let</span> url <span class="pl-k">=</span> NSURL(string: <span class="pl-s"><span class="pl-pds">"</span>http://httpbin.org/image/png<span class="pl-pds">"</span></span>)<span class="pl-k">!</span>
<span class="pl-k">let</span> task <span class="pl-k">=</span> NSURLSession<span class="pl-k">.</span>sharedSession()<span class="pl-k">.</span>dataTaskWithURL(url) {
    data, _, _ <span class="pl-k">in</span>
    <span class="pl-k">let</span> image <span class="pl-k">=</span> UIImage(data: data)
    <span class="pl-c">// ...</span>
}
task<span class="pl-k">.</span>resume()</pre></div>

<blockquote>
<p>In addition to the code in a Playground, Swift code run from the command line in a scripting file, in the Swift REPL, or in a project's optional "main.swift" file is also considered top-level code. Along with order-dependent execution, top-level code is the only kind that can contain statements outside of a function or encapsulated within a type.</p>
</blockquote>

<h2><a id="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Documentation</h2>

<p>Beyond experimentation, Playgrounds are also powerful for demonstrating tools and frameworks in the Swift language. Special documentation sections can be rendered as rich text, giving clear narration to code that demonstrates a technique or the correct way to use a library.</p>

<p>Unlike <a href="/swift-documentation/">Swift's <em>other</em> documentation syntax</a>, Swift Playgrounds use Markdown for richly formatted text. (If you downloaded the Playground for this post, you're reading Markdown right now.) A colon (<code>:</code>) added to a single- or multi-line comment marker signifies a rich-text comment:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-c">//: This line will have **bold** and *italic* text.</span>

<span class="pl-c">/*:</span>
<span class="pl-c">## Headers of All Sizes</span>
<span class="pl-c"></span>
<span class="pl-c">### Lists of Links</span>
<span class="pl-c"></span>
<span class="pl-c">- [NSHipster](http://nshipster.com)</span>
<span class="pl-c">- [ASCIIwwdc](http://asciiwwdc.com)</span>
<span class="pl-c">- [SwiftDoc](http://swiftdoc.org)</span>
<span class="pl-c"></span>
<span class="pl-c">### Images, Too</span>
<span class="pl-c"></span>
<span class="pl-c">![Remote Image]({{ site.asseturl }}/alert.gif)</span>
<span class="pl-c">![Local Image](bomb.gif) </span>
<span class="pl-c"></span>
<span class="pl-c">*Images in the Resources directory can be referenced locally*</span>
<span class="pl-c">*/</span></pre></div>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-documentation.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/xcplayground-documentation.png" alt="Rendered Documentation" style="max-width:100%;"></a></p>

<p>It's possible to toggle rich documentation rendering either by selecting the <strong>Editor → Show Rendered Markup</strong> menu item or by checking the <strong>Render Documentation</strong> checkbox in the File Inspector (⌘⌥1).</p>

<hr>

<p>Playgrounds represent a major shift in the way we share and learn about tools for OS X and iOS. A Playground can demonstrate each feature and provide a space for potential users to discover and explore the library you've created. Trade out your static <code>README.md</code> for an interactive <code>README.playground</code> and let the play begin anew.</p>
</article></div>