<div class="announce instapaper_body md" data-path="2015-02-02-ibinspectable-ibdesignable.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>category</th>

  <th>author</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>IBInspectable / IBDesignable</div></td>

  <td><div>Xcode</div></td>

  <td><div>Nate Cook</div></td>

  <td><div>Replacing an interface that requires us to memorize and type with one we can see and manipulate can be a enormous improvement. With `IBInspectable` and `IBDesignable`, Xcode 6 makes just such a substitution, building new interactions on top of old technologies.</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>

  <th>reviewed</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>2.0</div></td>

  <td><div>December 15, 2015</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<p>Show, don't tell. Seeing is believing. A picture is worth a thousand <del>emails</del> words. </p>

<p>Whatever the cliché, replacing an interface that requires us to memorize and type with one we can see and manipulate can be an enormous improvement. Xcode 6 makes just such a substitution, building new interactions on top of old technologies. With <code>IBInspectable</code> and <code>IBDesignable</code>, it's possible to build a custom interface for configuring your custom controls and have them rendered in real-time while designing your project.</p>

<h2><a id="user-content-ibinspectable" class="anchor" href="#ibinspectable" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IBInspectable</h2>

<p><code>IBInspectable</code> properties provide new access to an old feature: user-defined runtime attributes. Currently accessible from the identity inspector, these attributes have been available since before Interface Builder was integrated into Xcode. They provide a powerful mechanism for configuring any key-value coded property of an instance in a NIB, XIB, or storyboard:</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-runtime-attributes.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-runtime-attributes.png" alt="User-Defined Runtime Attributes" style="max-width:100%;"></a></p>

<p>While powerful, runtime attributes can be cumbersome to work with. The key path, type, and value of an attribute need to be set on each instance, without any autocompletion or type hinting, which requires trips to the documentation or a custom subclass's source code to double-check the settings. <code>IBInspectable</code> properties solve this problem outright: in Xcode 6 you can now specify any property as inspectable and get a user interface built just for your custom class.</p>

<p>For example, these properties in a <code>UIView</code> subclass update the backing layer with their values:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">@IBInspectable</span> <span class="pl-k">var</span> cornerRadius: CGFloat <span class="pl-k">=</span> <span class="pl-c1">0</span> {
   <span class="pl-k">didSet</span> {
       layer<span class="pl-k">.</span>cornerRadius <span class="pl-k">=</span> cornerRadius
       layer<span class="pl-k">.</span>masksToBounds <span class="pl-k">=</span> cornerRadius <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>
   }
}
<span class="pl-k">@IBInspectable</span> <span class="pl-k">var</span> borderWidth: CGFloat <span class="pl-k">=</span> <span class="pl-c1">0</span> {
   <span class="pl-k">didSet</span> {
       layer<span class="pl-k">.</span>borderWidth <span class="pl-k">=</span> borderWidth
   }
}
<span class="pl-k">@IBInspectable</span> <span class="pl-k">var</span> borderColor: UIColor? {
   <span class="pl-k">didSet</span> {
       layer<span class="pl-k">.</span>borderColor <span class="pl-k">=</span> borderColor?<span class="pl-k">.</span>CGColor
   }
}</pre></div>

<p>Marked with <code>@IBInspectable</code> (or <code>IBInspectable</code> in Objective-C), they are easily editable in Interface Builder's inspector panel. Note that Xcode goes the extra mile here—property names are converted from camel- to title-case and related names are grouped together:</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-inspectable.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-inspectable.png" alt="IBInspectable Attribute Inspector" style="max-width:100%;"></a></p>

<p>Since inspectable properties are simply an interface on top of user-defined runtime attributes, the same list of types is supported: booleans, strings, and numbers (i.e., <code>NSNumber</code> or any of the numeric value types), as well as <code>CGPoint</code>, <code>CGSize</code>, <code>CGRect</code>, <code>UIColor</code>, and <code>NSRange</code>, adding <code>UIImage</code> for good measure.</p>

<blockquote>
<p>Those already familiar with runtime attributes will have noticed a bit of trickery in the example above. <code>UIColor</code> is the only color type supported, not the <code>CGColor</code> native to a view's backing <code>CALayer</code>. The <code>borderColor</code> computed property maps the <code>UIColor</code> (set via runtime attribute) to the layer's required <code>CGColor</code>.</p>
</blockquote>

<h3><a id="user-content-making-existing-types-inspectable" class="anchor" href="#making-existing-types-inspectable" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Making Existing Types Inspectable</h3>

<p>Built-in Cocoa types can also be extended to have inspectable properties beyond the ones already in Interface Builder's attribute inspector. If you like rounded corners, you'll love this <code>UIView</code> extension:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">extension</span> UIView {
    <span class="pl-k">@IBInspectable</span> <span class="pl-k">var</span> cornerRadius: CGFloat {
        <span class="pl-k">get</span> {
            <span class="pl-k">return</span> layer<span class="pl-k">.</span>cornerRadius
        }
        <span class="pl-k">set</span> {
            layer<span class="pl-k">.</span>cornerRadius <span class="pl-k">=</span> newValue
            layer<span class="pl-k">.</span>masksToBounds <span class="pl-k">=</span> newValue <span class="pl-k">&gt;</span> <span class="pl-c1">0</span>
        }
    }
}</pre></div>

<p>Presto! A configurable border radius on any <code>UIView</code> you create.</p>

<h2><a id="user-content-ibdesignable" class="anchor" href="#ibdesignable" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IBDesignable</h2>

<p>As if that weren't enough, <code>IBDesignable</code> custom views also debut in Xcode 6. When applied to a <code>UIView</code> or <code>NSView</code> subclass, the <code>@IBDesignable</code> designation lets Interface Builder know that it should render the view directly in the canvas. This allows seeing how your custom views will appear without building and running your app after each change.</p>

<p>To mark a custom view as <code>IBDesignable</code>, prefix the class name with <code>@IBDesignable</code> (or the <code>IB_DESIGNABLE</code> macro in Objective-C). Your initializers, layout, and drawing methods will be used to render your custom view right on the canvas:</p>

<div class="highlight highlight-source-swift"><pre><span class="pl-k">@IBDesignable</span>
<span class="pl-k">class</span> MyCustomView: UIView {
    <span class="pl-k">...</span>
}</pre></div>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-designable.png" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-designable.png" alt="IBDesignable Live Preview" style="max-width:100%;"></a></p>

<p>The time-savings from this feature can't be overstated. Combined with <code>IBInspectable</code> properties, a designer or developer can easily tweak the rendering of a custom control to get the exact result she wants. Any changes, whether made in code or the attribute inspector, are immediately rendered on the canvas.</p>

<p>Moreover, any problems can be debugged without compiling and running the whole project. To kick off a debugging session right in place, simply set a breakpoint in your code, select the view in Interface Builder, and choose <strong>Editor</strong> ➔ <strong>Debug Selected Views</strong>.</p>

<p>Since the custom view won't have the full context of your app when rendered in Interface Builder, you may need to generate mock data for display, such as a default user profile image or generic weather data. There are two ways to add code for this special context:</p>

<blockquote>
<ul>
<li><p><code>prepareForInterfaceBuilder()</code>: This method compiles with the rest of your code but is only executed when your view is being prepared for display in Interface Builder.</p></li>
<li><p><code>TARGET_INTERFACE_BUILDER</code>: The <code>#if TARGET_INTERFACE_BUILDER</code> preprocessor macro will work in either Objective-C or Swift to conditionally compile the right code for the situation:</p></li>
</ul>

<div class="highlight highlight-source-swift"><pre>#<span class="pl-k">if</span> <span class="pl-k">!</span>TARGET_INTERFACE_BUILDER
    <span class="pl-c">// this code will run in the app itself</span>
#<span class="pl-k">else</span>
    <span class="pl-c">// this code will execute only in IB</span>
#endif</pre></div>
</blockquote>

<h2><a id="user-content-ibcalculatorconstructorset" class="anchor" href="#ibcalculatorconstructorset" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IBCalculatorConstructorSet</h2>

<p>What can you create with a combination of <code>IBInspectable</code> attributes in your <code>IBDesignable</code> custom view? As an example, let's update an old classic from <a href="http://www.folklore.org/StoryView.py?story=Calculator_Construction_Set.txt">Apple folklore</a>: the "Steve Jobs Roll Your Own Calculator Construction Set," Xcode 6-style (<a href="https://gist.github.com/natecook1000/4269059121ec247fbb90">gist</a>):</p>

<p><a href="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-CCS.gif" target="_blank"><img src="%7B%7B%20site.asseturl%20%7D%7D/IBInspectable-CCS.gif" alt="Calculator Construction Set" style="max-width:100%;"></a></p>

<hr>

<p><br></p>

<p>That was almost a thousand words—let's see some more pictures. What are <em>you</em> creating with these powerful new tools? <a href="http://twitter.com/share?hashtags=IBInspectable">Tweet an image</a> of your <code>IBInspectable</code> or <code>IBDesignable</code> creations with the hashtag <code>#IBInspectable</code>—we can all learn from seeing what's possible.</p>
</article></div>