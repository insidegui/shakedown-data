<div class="announce instapaper_body md" data-path="2014-01-01-new-years-2014.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>author</th>

  <th>category</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>Reader Submissions -<br> New Year's 2014</div></td>

  <td><div>Mattt Thompson</div></td>

  <td><div>Reader Submissions</div></td>

  <td><div>As we prepare to increment our NSDateComponents -year by 1, it's time once again for NSHipster end-of-the-year Reader Submissions!</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>n/a</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<p>As we prepare to increment our <code>NSDateComponents -year</code> by <code>1</code>, it's time once again for NSHipster end-of-the-year Reader Submissions! <a href="https://gist.github.com/mattt/4148342">Last year</a>, we got some <a href="http://nshipster.com/reader-submissions-new-years-2013/">mind-blowing tips and tricks</a>. With the release of iOS 7 &amp; Mavericks, and a year's worth of new developments in the Objective-C ecosystem, there was a ton of new stuff to write about.</p>

<p>Thanks to <a href="https://github.com/acoomans">Arnaud Coomans</a>, <a href="https://github.com/0xced">C√©dric Luthi</a>, <a href="https://github.com/dbgrandi">David Grandinetti</a>, <a href="https://github.com/ellneal">Ell Neal</a>, <a href="https://github.com/rubymaverick">Eric Allam</a>, <a href="https://github.com/eskerber">Erik Kerber</a>, <a href="https://github.com/jkubicek">Jim Kubicek</a>, <a href="https://github.com/nevyn">Joachim Bengtsson</a>, <a href="https://github.com/Anviking">Johannes Lund</a>, <a href="https://github.com/joshavant">Josh Avant</a>, <a href="https://github.com/jpm">Jo√£o Prado Maia</a>, <a href="https://github.com/incanus">Justin R. Miller</a>, <a href="https://github.com/PycKamil">Kamil Pyƒá</a>, <a href="https://github.com/mteece">Matthew Teece</a>, <a href="https://github.com/MaxGabriel">Maximilian Tagher</a>, <a href="https://github.com/mindbrix">Nigel Timothy Barber</a>, <a href="https://github.com/NSProgrammer">Nolan O'Brien</a>, <a href="https://github.com/pitiphong-p">Pitiphong Phongpattranont</a>, <a href="https://gist.github.com/stevemoser">Steve Moser</a>, <a href="https://github.com/Thomvis">Thomas Visser</a>, <a href="https://github.com/shpakovski">Vadim Shpakovski</a>, &amp; <a href="https://github.com/jurre">@jurre</a> for <a href="https://gist.github.com/7414618">contributing their great tips</a>.</p>

<hr>

<h2><a id="user-content-gcc-code-block-evaluation-c-extension" class="anchor" href="#gcc-code-block-evaluation-c-extension" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GCC Code Block Evaluation C Extension</h2>

<p>Let's make this official: <strong>NSHipster's Objective-C trend of 2013 is code block evaluation assignment</strong>. Recommended by both <a href="https://github.com/jkubicek">Jim Kubicek</a> and <a href="https://github.com/MaxGabriel">Maximilian Tagher</a> (citing <a href="http://cocoa-dom.tumblr.com/post/56517731293/new-thing-i-do-in-code">this blog post</a> by <a href="https://github.com/monkeydom">Dominik Wagner</a>), this trick does wonders to make code cleaner, safer, and more concise.</p>

<p>Behind the magic is a GCC C extension, which causes a code block to return a value if  enclosed within brackets and parentheses.</p>

<p>Watch, as it cuts through this view controller code like butter!</p>

<div class="highlight highlight-source-objc"><pre>self.searchBar = ({
    UISearchBar *searchBar = [[UISearchBar <span class="pl-c1">alloc</span>] <span class="pl-c1">initWithFrame:</span>({
        <span class="pl-c1">CGRect</span> frame = self.<span class="pl-smi">tableView</span>.<span class="pl-smi">frame</span>;
        frame.<span class="pl-smi">size</span>.<span class="pl-smi">height</span> = <span class="pl-c1">50</span>.<span class="pl-c1">0f</span>;
        frame;
    })];
    searchBar.<span class="pl-smi">delegate</span> = self;
    searchBar;
});</pre></div>

<p>This not only segregates configuration details into initialization, but the additional scope allows generic variable names like <code>frame</code>, <code>button</code>, and <code>view</code> to be reused in subsequent initializations. No more <code>loginButtonFrame = ... / signupButtonFrame = ...</code>!</p>

<p>If code craftsmanship is important to you, strongly consider making this standard practice in your work. It may look a bit weird at first, but this will very likely become common convention by the end of 2014.</p>

<h2><a id="user-content-default-values-with-gnu-style-ternary-" class="anchor" href="#default-values-with-gnu-style-ternary-" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default Values with GNU-style Ternary <code>?:</code></h2>

<p>The ternary operator, <code>?</code>, is shorthand for <code>if () {...} else {...}</code>. However, because of how difficult it can be to understand statements with ternary operators at a glance, they are generally dispreferred by veteran coders.</p>

<p>Nonetheless, <a href="https://github.com/MaxGabriel">Maximilian Tagher</a> offers a lesser-known (yet much-loved by those in-the-know) use of the ternary operator: <code>?:</code>, which acts as a convenient way to specify a fallback value to return if the left-hand side is <code>nil</code>.</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSLog</span>(<span class="pl-s"><span class="pl-pds">@"</span><span class="pl-c1">%@</span><span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">@"</span>a<span class="pl-pds">"</span></span> ?: <span class="pl-s"><span class="pl-pds">@"</span>b<span class="pl-pds">"</span></span>); <span class="pl-c">// @"a"</span>
<span class="pl-c1">NSLog</span>(<span class="pl-s"><span class="pl-pds">@"</span><span class="pl-c1">%@</span><span class="pl-pds">"</span></span>, <span class="pl-c1">nil</span> ?: <span class="pl-s"><span class="pl-pds">@"</span>b<span class="pl-pds">"</span></span>); <span class="pl-c">// @"b"</span></pre></div>

<p>This is especially convenient for providing default behavior when a property may not be set:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-en">dispatch_async</span>(self.completionQueue ?: dispatch_get_main_queue(), ^{
    <span class="pl-c">// ...</span>
});</pre></div>

<p>The main downside of this approach is that default Xcode project warning settings will raise a warning. You can get around this by wrapping the relevant code block in <code>#pragma</code> declarations, but the added LOC nullifies much of the brevity that this approach provides:</p>

<div class="highlight highlight-source-objc"><pre>#<span class="pl-k">pragma</span> clang diagnostic push
#<span class="pl-k">pragma</span> clang diagnostic ignored "-Wgnu"
self.name = name ?: <span class="pl-s"><span class="pl-pds">@"</span>Unknown<span class="pl-pds">"</span></span>;
#<span class="pl-k">pragma</span> clang diagnostic pop</pre></div>

<h2><a id="user-content-import" class="anchor" href="#import" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>@import</code></h2>

<p><a href="https://github.com/shpakovski">Vadim Shpakovski</a> reminds us of one of the more obscure additions to LLVM 5.0, the <code>@import</code> keyword. No more are the days of <code>Xcode ‚ñπ Project ‚ñπ TARGETS ‚ñπ General ‚ñπ Linked Frameworks and Libraries ‚ñπ +</code>. With <code>@import</code>, the Xcode will automatically link <code>MapKit</code>, <code>CoreData</code>, or any other referenced framework as necessary. Even <code>Prefix.pch</code> benefits, sporting a svelte new physique:</p>

<div class="highlight highlight-source-objc"><pre>@import UIKit;
@import Foundation;
@import CoreGraphics;</pre></div>

<h2><a id="user-content-customizing-mkmapview-tiles" class="anchor" href="#customizing-mkmapview-tiles" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing MKMapView Tiles</h2>

<p><a href="https://github.com/incanus">Justin R. Miller</a>, of <a href="https://www.mapbox.com">MapBox</a> fame, brings to our attention what is perhaps the most important feature in iOS 7 mapping: custom tile overlays:</p>

<blockquote>
<p>Relatively little-known feature of iOS 7: you can turn off Apple's own maps now with <code>MKTileOverlay</code>, <code>MKTileOverlayRenderer</code>, and <code>canReplaceMapContent</code>, unlike you could before with Apple or (pre-iOS 6) Google. And check out <a href="http://github.com/mapbox/mbxmapkit">MBXMapKit</a> if you'd like to do it in one line of code.</p>
</blockquote>

<h2><a id="user-content-thoughtbots-blog-post-on-mapkit-performance" class="anchor" href="#thoughtbots-blog-post-on-mapkit-performance" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Thoughtbot's Blog Post on MapKit Performance</h2>

<p>Speaking of iOS maps, <a href="https://github.com/jpm">Jo√£o Prado Maia</a> cites an amazing blog post by <a href="http://thoughtbot.com">thoughtbot</a>, <a href="http://robots.thoughtbot.com/how-to-handle-large-amounts-of-data-on-maps">"How To Efficiently Display Large Amounts of Data on iOS Maps"</a> by <a href="https://twitter.com/theocalmes">Theodore Calmes</a>. Consider it a must-read if you plan to do any significant iCartography in 2014.</p>

<h2><a id="user-content-nsattributedstring--html-in-ios-7" class="anchor" href="#nsattributedstring--html-in-ios-7" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>NSAttributedString + HTML in iOS 7</h2>

<p>Shifting gears a little bit, <a href="https://github.com/rubymaverick">Eric Allam</a> remarks that <code>NSAttributedString</code> can do HTML now in iOS 7 with the new <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688"><code>NSHTMLTextDocumentType</code></a> document type attribute. Combine with <a href="https://github.com/mdiep/MMMarkdown">MMMarkdown</a> for ridiculously easy <a href="http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7/">Markdown rendering in a <code>UITextView</code></a>.</p>

<hr>

<h2><a id="user-content-launch-arguments--user-defaults" class="anchor" href="#launch-arguments--user-defaults" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Launch Arguments &amp; User Defaults</h2>

<p>Offering another tip, <a href="https://github.com/shpakovski">Vadim Shpakovski</a> calls our attention to the relationship between launch arguments and <code>NSUserDefaults</code>:</p>

<p>The command line argument <code>-TestFeatureEnabled YES</code> can be checked in code with <code>[[NSUserDefaults standardUserDefaults] boolForKey:@"TestFeatureEnabled"]</code>. This is useful for debugging development builds.</p>

<hr>

<h2><a id="user-content-woes-of-a-missing-uiviewanimationcurve-value" class="anchor" href="#woes-of-a-missing-uiviewanimationcurve-value" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Woes of a Missing <code>UIViewAnimationCurve</code> Value</h2>

<p><a href="https://github.com/Thomvis">Thomas Visser</a> bemoans his pick for least awesome Objective-C development in 2013:</p>

<blockquote>
<p>In iOS7, the animation of the keyboard show/hide changed. Its duration and, most notably, its curve is different from previous iOS versions. As before, if you want to animate something with the keyboard, you can listen to <code>UIKeyboardWillShowNotification</code>/<code>UIKeyboardWillHideNotification</code> and use the values from the <code>userInfo</code> dictionary to coordinate your animations with the keyboard. The <code>userInfo</code> dictionary contains the keyboard's begin frame, end frame, animation curve and animation duration.</p>

<p>However, in iOS 7, the animation curve is an undefined value, meaning that it is not one of the 4 defined values of <code>UIViewAnimationCurve</code>. Instead, its value is <code>7</code>. This is a problem if you want to use the same curve in your own animation, because such a curve is not defined. The work-around, <a href="https://devforums.apple.com/message/878410#878410">as discussed on the Apple forums</a>, is to manually translate the <code>UIViewAnimationCurve</code> to a <code>UIViewAnimationOptions</code> value. From the definition of <code>UIViewAnimationOptions</code>, we learn that this translation is done by shifting the curve value 16 times to the left: <code>option = curve &lt;&lt; 16</code>. This works great, but shouldn't be necessary. I hope Apple will add this mysterious 5th curve to the definitions in a future iOS update.</p>
</blockquote>

<h2><a id="user-content-injecting-analytics-on-outgoing-links" class="anchor" href="#injecting-analytics-on-outgoing-links" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Injecting Analytics on Outgoing Links</h2>

<p><a href="https://github.com/dbgrandi">David Grandinetti</a> has a tip for apps that want to track outgoing links from within an app: override <code>AppDelegate -openURL:</code>:</p>

<div class="highlight highlight-source-objc"><pre>-(<span class="pl-c1">BOOL</span>)openURL:(<span class="pl-c1">NSURL</span> *)url{
    <span class="pl-k">if</span> ([[url <span class="pl-c1">scheme</span>] <span class="pl-c1">hasPrefix:</span><span class="pl-s"><span class="pl-pds">@"</span>http<span class="pl-pds">"</span></span>]) {
        [[GAI <span class="pl-c1">sharedInstance</span>].defaultTracker <span class="pl-c1">sendView:</span>[url <span class="pl-c1">absoluteString</span>]];
    }
    <span class="pl-k">return</span> [<span class="pl-v">super</span> <span class="pl-c1">openURL:</span>url];
}</pre></div>

<p>In this example, this information is being sent to Google Analytics, but one could easily adapt this approach for any analytics provider.</p>

<h2><a id="user-content-reviving-the-look-and-feel-of-ios-6-in-your-app-with-one-weird-trick-ui-designers-hate-it" class="anchor" href="#reviving-the-look-and-feel-of-ios-6-in-your-app-with-one-weird-trick-ui-designers-hate-it" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reviving the Look-and-Feel of iOS 6 in Your App with One Weird Trick (UI Designers <em>hate</em> it!)</h2>

<p>Still resisting the aesthetics of this year's iOS makeover? <a href="https://github.com/PycKamil">Kamil Pyƒá</a> shows us how to act as if iOS 7 never happened:</p>

<div class="highlight highlight-source-objc"><pre>[[<span class="pl-c1">NSUserDefaults</span> <span class="pl-c1">standardUserDefaults</span>] <span class="pl-c1">setObject:</span>@<span class="pl-c1">YES</span> <span class="pl-c1">forKey:</span><span class="pl-s"><span class="pl-pds">@"</span>UIUseLegacyUI<span class="pl-pds">"</span></span>]</pre></div>

<blockquote>
<p>And, of course, following up from a previous tip, since <code>NSUserDefaults</code> is tied to launch arguments, this can also be specified on launch. Keep this tucked in the back of your mind‚Äîthis could make for a simple yet effective April Fool's joke.</p>
</blockquote>

<hr>

<h2><a id="user-content-detecting-category-method-collisions" class="anchor" href="#detecting-category-method-collisions" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Detecting Category Method Collisions</h2>

<p>Categories are great, but suffer from that same original sin of Objective-C: lack of name-spacing. Duplicate method declarations in categories interact in undefined ways, and may lead to difficult-to-debug behavior.</p>

<p>Fortunately, <a href="https://github.com/0xced">C√©dric Luthi</a> shows us how to tell if any category methods are getting up in one another's business:</p>

<blockquote>
<p>Set the <code>OBJC_PRINT_REPLACED_METHODS</code> environment variable to <code>YES</code> in order to automatically log all methods that are smashed by categories.</p>
</blockquote>

<hr>

<h2><a id="user-content-a-plist-of-emoji-grouped-by-category" class="anchor" href="#a-plist-of-emoji-grouped-by-category" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A .plist of Emoji, Grouped by Category</h2>

<p>In an encore submission, C√©dric brings us a  <a href="https://gist.github.com/mattt/8185075">.plist file of Emoji grouped by category</a> (mirrored from CloudApp to Gist in order to be more searchable). <g-emoji alias="smile" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png" ios-version="6.0">üòÑ</g-emoji><g-emoji alias="+1" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f44d.png" ios-version="6.0">üëç</g-emoji></p>

<hr>

<h2><a id="user-content-quickly-determining-the-type-of-image-data" class="anchor" href="#quickly-determining-the-type-of-image-data" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quickly Determining the Type of Image Data</h2>

<p>Here's a simple function from <a href="https://github.com/NSProgrammer">Nolan O'Brien</a> that can be used to determine the type of image data based on the first couple bytes of the header:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">static</span> <span class="pl-k">inline</span> NSPUIImageType <span class="pl-en">NSPUIImageTypeFromData</span>(<span class="pl-c1">NSData</span> *imageData) {
    <span class="pl-k">if</span> (imageData.<span class="pl-smi">length</span> &gt; <span class="pl-c1">4</span>) {
        <span class="pl-k">const</span> <span class="pl-k">unsigned</span> <span class="pl-k">char</span> * bytes = [imageData <span class="pl-c1">bytes</span>];

        <span class="pl-k">if</span> (bytes[<span class="pl-c1">0</span>] == 0xff &amp;&amp;
            bytes[<span class="pl-c1">1</span>] == 0xd8 &amp;&amp;
            bytes[<span class="pl-c1">2</span>] == 0xff)
        {
            <span class="pl-k">return</span> NSPUIImageType_JPEG;
        }

        <span class="pl-k">if</span> (bytes[<span class="pl-c1">0</span>] == 0x89 &amp;&amp;
            bytes[<span class="pl-c1">1</span>] == 0x50 &amp;&amp;
            bytes[<span class="pl-c1">2</span>] == 0x4e &amp;&amp;
            bytes[<span class="pl-c1">3</span>] == 0x47)
        {
            <span class="pl-k">return</span> NSPUIImageType_PNG;
        }
    }

    <span class="pl-k">return</span> NSPUIImageType_Unknown;
}</pre></div>

<hr>

<h2><a id="user-content-print-kvo-context" class="anchor" href="#print-kvo-context" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Print KVO Context</h2>

<p>Once again, showing off his unmatched knowledge of Objective-C internals, C√©dric shares this extremely useful tip for debugging <a href="http://nshipster.com/key-value-observing/">Key-Value Observing</a>.</p>

<blockquote>
<p>Print which <a href="https://gist.github.com/ddribin/5158614#comment-798104">context</a> is passed to <code>observeValueForKeyPath:ofObject:change:context:</code> in lldb.</p>

<p>Say you have declared a context like this:</p>
</blockquote>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">static</span> <span class="pl-k">const</span> <span class="pl-k">void</span> *MyFooContext = &amp;MyFooContext;</pre></div>

<blockquote>
<p>...and you want to to know what context it is when you are inside</p>
</blockquote>

<div class="highlight highlight-source-objc"><pre>- (<span class="pl-k">void</span>)observeValueForKeyPath:(<span class="pl-c1">NSString</span> *)keyPath
                      ofObject:(<span class="pl-c1">id</span>)object
                        change:(<span class="pl-c1">NSDictionary</span> *)change
                       context:(<span class="pl-k">void</span> *)context</pre></div>

<blockquote>
<p>You can do this:</p>
</blockquote>

<pre><code>(lldb) image lookup -a `context`
      Address: MyApp[0x00026258] (MyApp.__DATA.__data + 4)
      Summary: MyFooContext
</code></pre>

<hr>

<h2><a id="user-content-creating-a-keypath-from-selectors" class="anchor" href="#creating-a-keypath-from-selectors" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a KeyPath from Selectors</h2>

<p>On the subject of Key-Value Coding, <a href="https://github.com/pitiphong-p">Pitiphong Phongpattranont</a> offers this useful function that builds a keypath from a variable list of selectors:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-k">inline</span> <span class="pl-c1">NSString</span> * <span class="pl-en">PTPKeyPathForSelectors</span>(<span class="pl-c1">SEL</span> selector, ...) {
  <span class="pl-k">if</span> (!selector) {
    <span class="pl-k">return</span> <span class="pl-c1">nil</span>;
  }

  <span class="pl-c1">NSMutableArray</span> *selectors = [<span class="pl-c1">NSMutableArray</span> <span class="pl-c1">array</span>];
  <span class="pl-c1">va_list</span> args;
  <span class="pl-c1">va_start</span>(args, selector);
  <span class="pl-c1">SEL</span> arg = selector;
  <span class="pl-k">do</span> {
    [selectors <span class="pl-c1">addObject:</span><span class="pl-c1">NSStringFromSelector</span>(arg)];
  } <span class="pl-k">while</span>((arg = <span class="pl-c1">va_arg</span>(args, <span class="pl-c1">SEL</span>)));
  <span class="pl-c1">va_end</span>(args);

  <span class="pl-k">return</span> [selectors <span class="pl-c1">componentsJoinedByString:</span><span class="pl-s"><span class="pl-pds">@"</span>.<span class="pl-pds">"</span></span>];
}</pre></div>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSString</span> *keyPath = PTPKeyPathForSelectors(<span class="pl-k">@selector</span>(<span class="pl-c1">data</span>), <span class="pl-k">@selector</span>(<span class="pl-c1">name</span>), <span class="pl-c1">nil</span>);
<span class="pl-c">// =&gt; @"data.name"</span></pre></div>

<h2><a id="user-content-nomad-cli-utilities" class="anchor" href="#nomad-cli-utilities" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nomad CLI Utilities</h2>

<p>And finally, <a href="https://github.com/mteece">Matthew Teece</a> gives a shout-out to <a href="http://nomad-cli.com">Nomad</a>, a world-class collection of command-line utilities‚Äîspecifically, <a href="https://github.com/nomad/houston">Houston</a>, which can send and manage push notifications from the command line, or within your Ruby application.</p>

<div class="highlight highlight-source-shell"><pre>$ apn push <span class="pl-s"><span class="pl-pds">"</span>&lt;token&gt;<span class="pl-pds">"</span></span> -c /path/to/cert.pem -m <span class="pl-s"><span class="pl-pds">"</span>Hello!<span class="pl-pds">"</span></span></pre></div>

<hr>

<p>Thus concludes this year's reader submissions. Thanks again to everyone for your submissions!</p>

<p>And thanks to you, dear reader, for sticking with NSHipster for another 52 weeks. Between the <a href="http://asciiwwdc.com/2013/sessions/228?q=NSHipster">WWDC session</a> and <a href="https://gumroad.com/l/nshipster">the book</a>, 2013 has been a bellwether year for NSHipster. Thank you for your support and enthusiasm for the site‚Äîit really does mean the world to me.</p>

<p>We have a ton of great stuff planned for 2014, so keep your fixies primed and your artisanal espresso hot for another season of great iOS and OS X knowledge.</p>
</article></div>