<div class="announce instapaper_body md" data-path="2013-01-07-nil.md" id="file"><article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>

  <th>author</th>

  <th>category</th>

  <th>tags</th>

  <th>excerpt</th>

  <th>status</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>nil / Nil / NULL / NSNull</div></td>

  <td><div>Mattt Thompson</div></td>

  <td><div>Objective-C</div></td>

  <td><div>nshipster, popular</div></td>

  <td><div>Understanding the concept of nothingness is as much a philosophical issue as it is a pragmatic one. We are inhabitants of a universe of somethings, yet reason in a logical universe of existential uncertainties. As a physical manifestation of a logical system, computers are faced with the intractable problem of how to represent nothing with something.</div></td>

  <td><div><table>
  <thead>
  <tr>
  <th>swift</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>n/a</div></td>
  </tr>
  </tbody>
</table></div></td>
  </tr>
  </tbody>
</table>

<p>Understanding the concept of nothingness is as much a philosophical issue as it is a pragmatic one. We are inhabitants of a universe of <em>somethings</em>, yet reason in a logical universe of existential uncertainties. As a physical manifestation of a logical system, computers are faced with the intractable problem of how to represent <em>nothing</em> with <em>something</em>.</p>

<p>In Objective-C, there are several different varieties of <em>nothing</em>. The reason for this goes back to <a href="http://nshipster.com/ns_enum-ns_options/">a common NSHipster refrain</a>, of how Objective-C bridges the procedural paradigm of C with Smalltalk-inspired object-oriented paradigm.</p>

<p>C represents <em>nothing</em> as <code>0</code> for primitive values, and <code>NULL</code> for pointers (<a href="http://c-faq.com/null/nullor0.html">which is equivalent to <code>0</code> in a pointer context</a>).</p>

<p>Objective-C builds on C's representation of <em>nothing</em> by adding <code>nil</code>. <code>nil</code> is an <em>object</em> pointer to nothing. Although semantically distinct from <code>NULL</code>, they are technically equivalent to one another.</p>

<p>On the framework level, Foundation defines <code>NSNull</code>, which defines a class method, <code>+null</code>, which returns the singleton <code>NSNull</code> object. <code>NSNull</code> is different from <code>nil</code> or <code>NULL</code>, in that it is an actual object, rather than a zero value.</p>

<p>Additionally, in <code>Foundation/NSObjCRuntime.h</code>, <code>Nil</code> is defined as a <em>class</em> pointer to nothing. This lesser-known title-case cousin of <code>nil</code> doesn't show up much very often, but it's at least worth noting.</p>

<h2><a id="user-content-theres-something-about-nil" class="anchor" href="#theres-something-about-nil" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>There's Something About <code>nil</code></h2>

<p>Newly-<code>alloc</code>'d <code>NSObject</code>s start life with <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html">their contents set to <code>0</code></a>. This means that all pointers that object has to other objects begin as <code>nil</code>, so it's unnecessary to, for instance, set <code>self.(association) = nil</code> in <code>init</code> methods.</p>

<p>Perhaps the most notable behavior of <code>nil</code>, though, is that it can have messages sent to it.</p>

<p>In other languages, like C++, this would crash your program, but in Objective-C, invoking a method on <code>nil</code> returns a zero value. This greatly simplifies expressions, as it obviates the need to check for <code>nil</code> before doing anything:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c">// For example, this expression...</span>
<span class="pl-k">if</span> (name != <span class="pl-c1">nil</span> &amp;&amp; [name <span class="pl-c1">isEqualToString:</span><span class="pl-s"><span class="pl-pds">@"</span>Steve<span class="pl-pds">"</span></span>]) { ... }

<span class="pl-c">// ...can be simplified to:</span>
<span class="pl-k">if</span> ([name <span class="pl-c1">isEqualToString:</span><span class="pl-s"><span class="pl-pds">@"</span>Steve<span class="pl-pds">"</span></span>]) { ... }</pre></div>

<p>Being aware of how <code>nil</code> works in Objective-C allows this convenience to be a feature, and not a lurking bug in your application. Make sure to guard against cases where <code>nil</code> values are unwanted, either by checking and returning early to fail silently, or adding a <code>NSParameterAssert</code> to throw an exception.</p>

<h2><a id="user-content-nsnull-something-for-nothing" class="anchor" href="#nsnull-something-for-nothing" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>NSNull</code>: Something for Nothing</h2>

<p><code>NSNull</code> is used throughout Foundation and other frameworks to skirt around the limitations of collections like <code>NSArray</code> and <code>NSDictionary</code> not being able to contain <code>nil</code> values. You can think of <code>NSNull</code> as effectively <a href="http://en.wikipedia.org/wiki/Object_type_(object-oriented_programming)#Boxing">boxing</a> the <code>NULL</code> or <code>nil</code> value so that it can be used in collections:</p>

<div class="highlight highlight-source-objc"><pre><span class="pl-c1">NSMutableDictionary</span> *mutableDictionary = [<span class="pl-c1">NSMutableDictionary</span> <span class="pl-c1">dictionary</span>];
mutableDictionary[<span class="pl-s"><span class="pl-pds">@"</span>someKey<span class="pl-pds">"</span></span>] = [<span class="pl-c1">NSNull</span> <span class="pl-c1">null</span>]; <span class="pl-c">// Sets value of NSNull singleton for `someKey`</span>
<span class="pl-c1">NSLog</span>(<span class="pl-s"><span class="pl-pds">@"</span>Keys: <span class="pl-c1">%@</span><span class="pl-pds">"</span></span>, [mutableDictionary <span class="pl-c1">allKeys</span>]); <span class="pl-c">// @[@"someKey"]</span></pre></div>

<hr>

<p>So to recap, here are the four values representing <em>nothing</em> that every Objective-C programmer should know about:</p>

<table>
  <thead>
    <tr>
      <th>Symbol</th>
      <th>Value</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><tt>NULL</tt></td>
      <td><tt>(void *)0</tt></td>
      <td>literal null value for C pointers</td>
    </tr>
    <tr>
      <td><tt>nil</tt></td>
      <td><tt>(id)0</tt></td>
      <td>literal null value for Objective-C objects</td>
    </tr>
    <tr>
      <td><tt>Nil</tt></td>
      <td><tt>(Class)0</tt></td>
      <td>literal null value for Objective-C classes</td>
    </tr>
    <tr>
      <td><tt>NSNull</tt></td>
      <td><tt>[NSNull null]</tt></td>
      <td>singleton object used to represent null</td>
    </tr>
  </tbody>
</table>
</article></div>